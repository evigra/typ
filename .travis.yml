language: python

sudo: false
cache:
  apt: true
  directories:
    - $HOME/.cache/pip

addons:
  apt:
    packages:
      - expect-dev
      - python-lxml
      - python-simplejson
      - python-yaml
      - swig  # Required for m2crypto
      - python-m2crypto
      - xmlstarlet
      - xsltproc
      - openssl
      - poppler-utils
      - antiword

python:
  - "2.7"

env:
  global:
  - TEST_OTHER_PROJECTS="${HOME}/addons-vauxoo"
  - LINT_CHECK="0" TESTS="0"
  - VERSION="8.0-typ" ODOO_REPO="Vauxoo/odoo"
  - INCLUDE="typ" LANG_ALLOWED="es"
  - secure: "tSdsZxMDtnWzvVLcifS2UTjKYxgk/loMapwxRrLieI1unChexxuWG2p5ep6OhaaWoJeTrum5NnSIeGvdE7PRC1k2MhK8pCYLatdpdkIT8kjBBDGfz3sIx0jIFoLF0jfoi6KnA7XTJ7mviW6gJXzdKADkE1ktDI7wqPYVSCJKpZsiQwn1qRc8Om2HB/BBcIdb7Qrmfn9UdzDqfTl4zGojN3mfWwwGTAq0FT0CVVg6wJ/alAqjuCVWnG2GYG/7N74Xz0QMKTZb8qC1nTbnisnQcY9qZdZKEy+Lp4XUuuuOqqnUzkCNIsszFTSzH+nQ9fllWklHw5vyYKNdMbv7o5ywkle9BA2iNUK4Cq3CgYldmbTH3vBOYsTr0U6H1ahknOCKQ0fzWQptkqUIsUzxU8OKBu5pwbRCOgLCBpajOWrvjvuvnhjzuOB6VVLLsCagXwLzy7nWtLJdBbdnbIu7Hsv8r9x5FRBRC4yARvpRgAtCugfslvhNPtY/5oBt2JV1Y66Y3XAx4nZ9IaiDhKL2TQrc816KBT0dBJ5i0vFX5XHLwqMm4pQXYV0fPd5D2S8zo2lBnHkAXv5vu+C61WytBG0Z3qXkA6tdl/psbY/uIVmsmGjfXkqIySjvlRI3MLM8HpfdFeFRFoTcK9AiLiglhM5Ima74FKWAMRPOeUU+YykHbMY="
  - secure: "zzOMIS52sFzij9hetcQExvRSBe0PTyCH2/KY1sDX8hv9lpGcDGajWM1mmGvnfI/Zgcxm26CwSBzEaXjFfDqvByOvXnpUYp3ubGeeEJ397RtqaEtgbgNedYaIQhoESfUKG0ZRDJ5/vKKg1pn0fFjCAJyDhTX1iVldYN5+Yn+34PLBJ9c1tVnw8ISvTKiUAcf2F6FwsaDKfyzIQZegfKfWDs1VtlYcy7JNFS5FWWPWAjY+Cm1VmRsKs2sgYw2q3aU6L0vX5TYYqo/kWOkBgfDQYRTpQFYpcWipOwvqeBuCc1JykRirs7YLujij4fWS5SQ0Hh/nLzkzCIBrwueN+xBbofqdQHYnskmYiVExQd/abnLH6qSbnY5o19jyM04++EWdK6RVGEt1hWVonaKKFO/X/EoQ5/IvAJMBcjxtjpWh8OleOJ/efI77+aGNc8C+TCDiyUIWVD8uBpqTI/Xk64IIEQxx+i+1Gwlj+aUB9IdcdJNjm8BnUzbkTchBbOE9OeT1dG81Ks1kk/dwd8Y2gPMh2An/5d0I6L+Y64SdM3mf91SIiiYlDDMGhII6mQZ1AjeIfUpUpzzN07EkcIJHvdx2IQTkJeSYdO1wISlhYujitFJLdCUXcKfkijJfefduy0uzfCaEfx6BXVuakaQZYwuqLoh0mgxCk7E2mWMFPLFX+LE="

  matrix:
  - LINT_CHECK="1"
  - TESTS="1" WEBLATE="1"

virtualenv:
  system_site_packages: true

install:
  - git clone --single-branch --depth=1 https://github.com/vauxoo/maintainer-quality-tools.git -b master ${HOME}/maintainer-quality-tools
  - export PATH=${HOME}/maintainer-quality-tools/travis:${PATH}
  - travis_install_nightly

script:
  - travis_run_tests

after_success:
  - travis_after_tests_success
