<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="project_issue_typ_group_manager" model="res.groups">
            <field name="name">Project Issue TYP / Manager</field>
        </record>

        <record id="project_issue_typ_group_issues_team" model="res.groups">
            <field name="name">Project Issue TYP / Issues team</field>
        </record>

        <record id="project_issue_issues_team" model="ir.rule">
            <field name="name">Project Issue / user of issues team</field>
            <field name="model_id" ref="model_project_issue"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">
                [(1, '=', 1)]
            </field>
            <field name="groups" eval="[(4, ref('typ_project_issue.project_issue_typ_group_issues_team'))]"/>
        </record>

        <record id="project_issue_only_creator_assinged_can_modify" model="ir.rule">
            <field name="name">Project Issue only creator or assigned user can modify issues</field>
            <field name="model_id" ref="model_project_issue"/>
            <field name="perm_read" eval="0"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_unlink" eval="0"/>
            <field name="domain_force">
                ['|',
                 '|',('project_id.user_id','=',False),('project_id.user_id','=',user.id),
                 '|',
                 '|',('user_id', '=', False),('user_id', '=', user.id),
                 '|',('create_uid', '=', False),('create_uid', '=', user.id)]
            </field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>
    </data>
</openerp>
