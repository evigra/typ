<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!-- Warehouse -->
    <record id="whr_test_01" model="stock.warehouse">
        <field name="name">Test warehouse 1</field>
        <field name="code">TW1</field>
    </record>

    <record id="whr_test_02" model="stock.warehouse">
        <field name="name">Test warehouse 2</field>
        <field name="code">TW2</field>
    </record>

    <!-- Sequence -->
    <record id="sequence_picking_type_test_1" model="ir.sequence">
        <field name="name">Sequence Picking Type Test 1</field>
        <field name="prefix">P/T1/</field>
        <field name="padding">5</field>
        <field name="number_next">1</field>
        <field name="number_increment">1</field>
    </record>
    <record id="sequence_picking_type_test_2" model="ir.sequence">
        <field name="name">Sequence Picking Type Test 2</field>
        <field name="prefix">P/T2/</field>
        <field name="padding">5</field>
        <field name="number_next">1</field>
        <field name="number_increment">1</field>
    </record>
    <record id="sequence_picking_type_test_3" model="ir.sequence">
        <field name="name">Sequence TW1 Out</field>
        <field name="prefix">TW1/OUT/</field>
        <field name="padding">5</field>
        <field name="number_next">1</field>
        <field name="number_increment">1</field>
    </record>
    <record id="sequence_picking_type_test_4" model="ir.sequence">
        <field name="name">Sequence TW2 IN</field>
        <field name="prefix">TW2/IN/</field>
        <field name="padding">5</field>
        <field name="number_next">1</field>
        <field name="number_increment">1</field>
    </record>

    <!-- Stock picking type -->
    <record id="stock_picking_type_test_1" model="stock.picking.type">
        <field name="name">Automatic output</field>
        <field name="code">outgoing</field>
        <field name="sequence_id" ref="sequence_picking_type_test_1" />
        <field name="sequence_code">OUT</field>
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="default_location_src_id" ref="whr_test_01_location" />
        <field name="default_location_dest_id" ref="stock.stock_location_customers" />
    </record>
    <record id="stock_picking_type_test_2" model="stock.picking.type">
        <field name="name">Automatic transit</field>
        <field name="code">incoming</field>
        <field name="sequence_id" ref="sequence_picking_type_test_1" />
        <field name="sequence_code">TRANSIT</field>
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="default_location_src_id" ref="stock.stock_location_inter_wh" />
        <field name="default_location_dest_id" ref="whr_test_01_location" />
    </record>
    <record id="stock_picking_type_test_3" model="stock.picking.type">
        <field name="name">Output to customer</field>
        <field name="code">outgoing</field>
        <field name="sequence_id" ref="sequence_picking_type_test_2" />
        <field name="sequence_code">OUT</field>
        <field name="warehouse_id" ref="whr_test_02" />
        <field name="default_location_src_id" ref="whr_test_02_location" />
        <field name="default_location_dest_id" ref="stock.stock_location_inter_wh" />
        <field name="active" eval="True" />
    </record>
    <record id="stock_picking_type_test_4" model="stock.picking.type">
        <field name="name">TW1-Transit</field>
        <field name="code">outgoing</field>
        <field name="sequence_id" ref="sequence_picking_type_test_3" />
        <field name="sequence_code">TRANSIT</field>
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="default_location_src_id" ref="whr_test_01_location" />
        <field name="default_location_dest_id" ref="stock.stock_location_inter_wh" />
        <field name="active" eval="True" />
    </record>
    <record id="stock_picking_type_test_5" model="stock.picking.type">
        <field name="name">Transit-TW2</field>
        <field name="code">incoming</field>
        <field name="sequence_id" ref="sequence_picking_type_test_4" />
        <field name="sequence_code">TRANSIT</field>
        <field name="warehouse_id" ref="whr_test_02" />
        <field name="default_location_src_id" ref="stock.stock_location_inter_wh" />
        <field name="default_location_dest_id" ref="whr_test_02_location" />
        <field name="active" eval="True" />
    </record>

    <!-- Stock Location Route 1-->
    <record id="stock_location_route_test_1" model="stock.location.route">
        <field name="name">TW1 Supply from TW2</field>
        <field name="product_selectable" eval="False" />
        <field name="product_categ_selectable" eval="False" />
        <field name="warehouse_selectable" eval="False" />
        <field name="sale_selectable" eval="True" />
    </record>

    <!-- Pull Rules -->
    <record id="pull_rule_test_1" model="stock.rule">
        <field name="name">Test Warehouse 1: customer</field>
        <field name="action">pull</field>
        <field name="procure_method">make_to_order</field>
        <field name="route_id" ref="stock_location_route_test_1" />
        <field name="picking_type_id" ref="stock_picking_type_test_1" />
        <field name="location_id" ref="stock.stock_location_customers" />
        <field name="group_propagation_option">propagate</field>
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="location_src_id" ref="whr_test_01_location" />
        <field name="propagate_warehouse_id" ref="whr_test_01" />
    </record>
    <record id="pull_rule_test_2" model="stock.rule">
        <field name="name">Test Warehouse 1: transit</field>
        <field name="action">pull</field>
        <field name="procure_method">make_to_order</field>
        <field name="route_id" ref="stock_location_route_test_1" />
        <field name="picking_type_id" ref="stock_picking_type_test_2" />
        <field name="location_id" ref="whr_test_01_location" />
        <field name="group_propagation_option">propagate</field>
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="location_src_id" ref="stock.stock_location_inter_wh" />
        <field name="propagate_warehouse_id" ref="whr_test_01" />
    </record>
    <record id="pull_rule_test_3" model="stock.rule">
        <field name="name">Test Warehouse 2: stock</field>
        <field name="action">pull</field>
        <field name="procure_method">make_to_stock</field>
        <field name="route_id" ref="stock_location_route_test_1" />
        <field name="picking_type_id" ref="stock_picking_type_test_3" />
        <field name="location_id" ref="stock.stock_location_inter_wh" />
        <field name="group_propagation_option">propagate</field>
        <field name="location_src_id" ref="whr_test_02_location" />
        <field name="propagate_warehouse_id" ref="whr_test_02" />
    </record>

    <!-- Stock Location Route 2 -->
    <record id="stock_location_route_test_2" model="stock.location.route">
        <field name="name">PE TW1 - TW2</field>
        <field name="product_selectable" eval="False" />
        <field name="product_categ_selectable" eval="False" />
        <field name="warehouse_selectable" eval="False" />
        <field name="sale_selectable" eval="True" />
    </record>

    <!-- Pull Rules -->
    <record id="pull_rule_test_2_1" model="stock.rule">
        <field name="name">TW1: purchase -> stock</field>
        <field name="location_id" ref="whr_test_01_location" />
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="route_id" ref="stock_location_route_test_2" />
        <field name="action">buy</field>
        <field name="picking_type_id" ref="whr_test_02_pick_type_in" />
        <field name="group_propagation_option">none</field>
    </record>
    <record id="pull_rule_test_2_2" model="stock.rule">
        <field name="name">TW2: purchase -> stock</field>
        <field name="location_id" ref="whr_test_02_location" />
        <field name="warehouse_id" ref="whr_test_02" />
        <field name="route_id" ref="stock_location_route_test_2" />
        <field name="action">pull</field>
        <field name="picking_type_id" ref="whr_test_02_pick_type_in" />
        <field name="procure_method">make_to_order</field>
        <field name="location_src_id" ref="stock.stock_location_inter_wh" />
        <field name="group_propagation_option">propagate</field>
        <field name="propagate_warehouse_id" ref="whr_test_02" />
    </record>
    <record id="pull_rule_test_2_3" model="stock.rule">
        <field name="name">TW2: stock -> customer</field>
        <field name="location_id" ref="stock.stock_location_customers" />
        <field name="warehouse_id" ref="whr_test_02" />
        <field name="route_id" ref="stock_location_route_test_2" />
        <field name="action">pull</field>
        <field name="picking_type_id" ref="whr_test_02_pick_type_out" />
        <field name="procure_method">make_to_order</field>
        <field name="location_src_id" ref="whr_test_02_location" />
        <field name="group_propagation_option">propagate</field>
        <field name="propagate_warehouse_id" ref="whr_test_02" />
    </record>
    <record id="pull_rule_test_2_4" model="stock.rule">
        <field name="name">Transit Stock</field>
        <field name="location_id" ref="stock.stock_location_inter_wh" />
        <field name="route_id" ref="stock_location_route_test_2" />
        <field name="action">pull</field>
        <field name="picking_type_id" ref="whr_test_01_pick_type_out" />
        <field name="procure_method">make_to_order</field>
        <field name="location_src_id" ref="whr_test_01_location" />
        <field name="group_propagation_option">propagate</field>
        <field name="propagate_warehouse_id" ref="whr_test_01" />
    </record>

    <!-- Stock Location Route 3 -->
    <record id="stock_location_route_test_3" model="stock.location.route">
        <field name="name">TW2 Supply from TW1</field>
        <field name="product_selectable" eval="True" />
        <field name="product_categ_selectable" eval="True" />
        <field name="warehouse_selectable" eval="False" />
        <field name="sale_selectable" eval="False" />
    </record>

    <!-- Pull Rules -->
    <record id="pull_rule_test_3_1" model="stock.rule">
        <field name="name">TW1: Stock -> Transit</field>
        <field name="location_id" ref="stock.stock_location_inter_wh" />
        <field name="warehouse_id" ref="whr_test_01" />
        <field name="route_id" ref="stock_location_route_test_3" />
        <field name="action">pull</field>
        <field name="picking_type_id" ref="stock_picking_type_test_4" />
        <field name="procure_method">make_to_stock</field>
        <field name="location_src_id" ref="whr_test_01_location" />
        <field name="group_propagation_option">propagate</field>
        <field name="propagate_warehouse_id" ref="whr_test_01" />
    </record>
    <record id="pull_rule_test_3_2" model="stock.rule">
        <field name="name">TW2: Transit -> Stock</field>
        <field name="location_id" ref="whr_test_02_location" />
        <field name="warehouse_id" ref="whr_test_02" />
        <field name="route_id" ref="stock_location_route_test_3" />
        <field name="action">pull</field>
        <field name="picking_type_id" ref="stock_picking_type_test_5" />
        <field name="procure_method">make_to_order</field>
        <field name="location_src_id" ref="stock.stock_location_inter_wh" />
        <field name="group_propagation_option">propagate</field>
        <field name="propagate_warehouse_id" ref="whr_test_01" />
    </record>

    <!-- Locations Scrapped -->
    <record id="location_scrapped_test" model="stock.location">
        <field name="name">Location scrapped test</field>
        <field name="location_id" ref="stock.stock_location_locations_virtual" />
        <field name="scrap_location" eval="True" />
        <field name="usage">inventory</field>
    </record>

    <record id="base.user_demo" model="res.users">
        <field name="groups_id" eval="[(4, ref('group_stock_manual_transfer'))]" />
    </record>

</odoo>
