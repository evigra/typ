<?xml version="1.0" encoding="utf-8"?>
    <openerp>
        <data>
            <template id="report_electronic_invoice_document">
                <div class="header">
                    <div style="font-size: 9px; line-height: 10px; position: absolute; top: 700px; left: 0px; z-index: -1; overflow: visible; -webkit-transform:rotate(-90deg); -webkit-transform-origin: 0% 0%;">This document is a printed representation of a CFDI</div>
                </div>
                <div class="page" style="margin: auto 0 auto 15px;">
                    <t t-if="o">
                        <t t-value="set_global_data(o)"></t>
                        <t t-set="dict_data" t-value="set_dict_data(o)"></t>
                        <t t-set="extra_data" t-value="o.context_extra_data"></t>
                        <t t-set="dict_context_extra_data" t-value="eval(extra_data)"></t>
                        <t t-set="empty_dict" t-value="{}"></t>
                        <t t-set="invoice_obj" t-value="get_model_object(o)"></t>
                        <t t-set="order_obj" t-value="get_sale_order(invoice_obj.id)"></t>
                    </t>
                    <t t-set="version" t-value="dict_data.get('@version', dict_data.get('@Version', '3.2'))"/>
                    <t t-set="company_address" t-value="o.company_emitter_id.address_invoice_parent_company_id"/>
                    <div class="row">
                        <div class="col-xs-3" style="margin: 0px; padding: 0px;">
                            <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 60; max-width: auto;"/>
                        </div>
                        <div class="col-xs-offset-4 col-xs-5 text-right">
                            <div class="row" style="font-size: 12;">
                                <div class="col-xs-4 text-center bg-primary" style="border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <t t-if="dict_data.get('@TipoDeComprobante', '') == 'P'"><span>Payment:</span></t>
                                    <t t-if="dict_context_extra_data.get('type', False) == 'out_invoice'"><span>Invoice:</span></t>
                                    <t t-if="dict_context_extra_data.get('type', False) == 'out_refund'"><span style="font-size:12px">Credit note</span></t>
                                    <t t-if="dict_context_extra_data.get('type', False) == 'payroll'"><span style="font-size:12px">Payroll</span></t>
                                </div>
                                <div class="col-xs-8 text-center bg-primary" style="border-top-right-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Document Date</span>
                                </div>
                            </div>
                            <div class="row" style="border: 2px solid #deeff5; border-bottom-left-radius: 0.4em; border-bottom-right-radius: 0.4em;">
                                <div class="col-xs-4 text-center" style="padding-top: 0.0em; border-right: 2px solid #deeff5;">
                                    <h4 style="color:red;">
                                        <t t-if="dict_context_extra_data.get('type', False) in ['out_invoice', 'out_refund']">
                                            <t t-if="o.state in ['done', 'signed']">
                                                <strong t-esc="invoice_obj.number"/>
                                            </t>
                                            <t t-if="not o.state in ['done', 'signed']">
                                                <strong>WITHOUT FOLIO OR INVALID STATUS</strong>
                                            </t>
                                        </t>
                                    </h4>
                                </div>
                                <div class="col-xs-8 text-center" style="padding-top: 1.0em; font-size: 10;">
                                    <t t-set="date" t-value="dict_data.get('@fecha', dict_data.get('@Fecha', False))"/>
                                    <span t-esc="date and datetime.strptime(date.encode('ascii','replace'), '%Y-%m-%dT%H:%M:%S').strftime('%d/%m/%Y %H:%M:%S') or ''"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em; font-size: 12;">
                        <div class="col-xs-5" style="padding-left: 0.0em; padding-right: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Client Reference</span>
                            </div>
                        </div>
                        <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Fiscal Regime</span>
                            </div>
                        </div>
                        <div class="col-xs-3" style="padding-right: 0.0em; padding-left: 0.2em;" t-if="o.model_source == 'account.invoice'">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Type Payment Term</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div>
                            <div class="col-xs-5" style="padding-left: 0.0em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="order_obj and order_obj.client_order_ref or ''"/>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <t t-set="emitter" t-value="dict_data.get('Emisor', {})"/>
                                    <span t-esc="(emitter and emitter.get('RegimenFiscal', {}).get('@Regimen', '')) or emitter.get('@RegimenFiscal', '')"/>
                                </div>
                            </div>
                            <div class="col-xs-3" style="padding-right: 0.0em; padding-left: 0.2em;" t-if="o.model_source == 'account.invoice'">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="invoice_obj.with_context({'lang': o.report_lang}).get_human_value('type_payment_term', invoice_obj.type_payment_term)"/>
                                    <!-- <span t-esc="invoice_obj.type_payment_term"/> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em; font-size: 12;">
                        <div>
                            <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.0em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Issuer</span>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Customer</span>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Issued at</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div style="font-size: 10;">
                            <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.0em;">
                                <div class="text-left" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em;">
                                    <t t-set="dom_fis" t-value="dict_data.get('Emisor', {}).get('DomicilioFiscal', {})"/>
                                    <t t-set="emisor" t-value="dict_context_extra_data.get('emisor', {})"/>
                                    <div>
                                        <strong t-esc="emitter.get('@nombre', emitter.get('@Nombre', ''))"/>
                                    </div>
                                    <div>
                                        <span t-esc="dom_fis.get('@calle', company_address.street or '')"/>
                                        <span t-esc="dom_fis.get('@noExterior', company_address.l10n_mx_street3 or '')"/>
                                        <span t-esc="dom_fis.get('@noInterior', company_address.l10n_mx_street4 or '')"/>
                                        <br/>
                                        <span t-esc="dom_fis.get('@colonia', company_address.street2 or '')"/>
                                        <span t-esc="dom_fis.get('@codigoPostal', company_address.zip or '')"/>
                                        <br/>
                                        <span t-esc="dom_fis.get('@localidad', company_address.l10n_mx_city2 or '')"/>
                                        <br/>
                                        <span t-esc="dom_fis.get('@municipio', company_address.city or '')"/>
                                        <span t-esc="dom_fis.get('@estado', company_address.state_id and company_address.state_id.name or '')"/>
                                        <span t-esc="dom_fis.get('@pais', company_address.country_id and company_address.country_id.name or'')"/>
                                    </div>
                                    <div>
                                         <span t-if="emisor.get('phone', False)" t-esc="emisor.get('phone', '')"/>
                                    </div>
                                    <div>
                                         <strong t-esc="'RFC. %s'%(emitter.get('@rfc', emitter.get('@Rfc', '')))"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em;">
                                    <t t-set="receiver" t-value="dict_data.get('Receptor', {})"/>
                                    <t t-set="add_receptor" t-value="dict_data.get('Receptor', {}).get('Domicilio', {})"></t>
                                    <t t-set="partner_address" t-value="dict_context_extra_data.get('partner_address', {})"/>
                                    <div>
                                        <span t-esc="receiver.get('@nombre', receiver.get('@Nombre', ''))"/>
                                    </div>
                                    <div>
                                        <span t-esc="add_receptor.get('@calle', partner_address.get('street', ''))"/>
                                        <span t-esc="add_receptor.get('@noExterior', partner_address.get('l10n_mx_street3', ''))"/>
                                        <span t-esc="add_receptor.get('@noInterior', partner_address.get('l10n_mx_street4', ''))"/>
                                        <br/>
                                        <span t-esc="add_receptor.get('@colonia', partner_address.get('street2', ''))"/>
                                        <span t-esc="add_receptor.get('@codigoPostal', partner_address.get('zip', ''))"/>
                                        <br/>
                                        <span t-esc="add_receptor.get('@localidad', partner_address.get('l10n_mx_city2', ''))"/>
                                        <br/>
                                        <span t-esc="add_receptor.get('@municipio', partner_address.get('city', ''))"/>
                                        <span t-esc="add_receptor.get('@estado', partner_address.get('state_id', ''))"/>
                                        <span t-esc="add_receptor.get('@pais', partner_address.get('country_id', ''))"/>
                                    </div>
                                    <br/>
                                    <div>
                                        <strong t-esc="'RFC. %s' % (receiver.get('@rfc', receiver.get('@Rfc', '')))"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;" t-if="o.model_source == 'account.invoice'">
                                <div class="text-right" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em;">
                                    <t t-set="partner_address" t-value="dict_context_extra_data.get('issued_address', {})"/>
                                    <t t-set="address" t-value="dict_data.get('Emisor', {}).get('ExpedidoEn', {}) or {}"></t>
                                    <div>
                                        <strong t-esc="dict_data.get('Emisor', '') and dict_data.get('Emisor').get('@nombre', '') or ''"/>
                                    </div>
                                    <div>
                                        <span t-esc="address.get('@calle', partner_address.get('street', ''))"/>
                                        <span t-esc="address.get('@noExterior', partner_address.get('l10n_mx_street3', ''))"/>
                                        <span t-esc="address.get('@noInterior', partner_address.get('l10n_mx_street4', ''))"/>
                                        <br/>
                                        <span t-esc="address.get('@colonia', partner_address.get('street2', ''))"/>
                                        <span t-esc="address.get('@codigoPostal', partner_address.get('zip', ''))"/>
                                        <br/>
                                        <span t-esc="address.get('@localidad', partner_address.get('l10n_mx_city2', ''))"/>
                                        <br/>
                                        <span t-esc="address.get('@municipio', partner_address.get('city', ''))"/>
                                        <span t-esc="address.get('@estado', partner_address.get('state_id', ''))"/>
                                        <span t-esc="address.get('@pais', partner_address.get('country_id', ''))"/>
                                    </div>
                                    <br/>
                                    <br/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="font-size:10px; padding-top: 0.5em;" t-if="o.model_source == 'account.invoice'">
                        <div class="col-xs-1 text-center bg-primary">
                            <span>Quantity</span>
                        </div>
                        <div class="col-xs-1 text-center bg-primary">
                            <span>Unit</span>
                        </div>
                        <div class="col-xs-1 text-center bg-primary">
                            <span>SAT Key</span>
                        </div>
                        <div class="col-xs-5 text-center bg-primary">
                            <span>Description</span>
                        </div>
                        <div class="col-xs-2 text-center bg-primary">
                            <span>Unit Price</span>
                        </div>
                        <div class="col-xs-2 text-center bg-primary">
                            <span>Amount</span>
                        </div>
                    </div>
                    <div class="row" t-if="o.model_source == 'account.invoice'">
                        <table class="table table-striped" style="font-size:9px; border-collapse: collapse;">
                            <t t-set="dict_lines" t-value="dict_data.get('Conceptos', {}).get('Concepto', ())"/>
                            <t t-if="not isinstance(dict_lines, list)">
                                <t t-set="dict_lines" t-value="[dict_lines]"/>
                            </t>
                            <t t-foreach="range(0,len(dict_lines))" t-as="dicto">
                                <tr class="text-center">
                                    <td class="col-xs-1 text-right"><span t-esc="formatLang(float(dict_lines[dicto].get('@cantidad', dict_lines[dicto].get('@Cantidad', '0.0'))),digits=0, grouping=True)"></span></td>
                                    <td class="col-xs-1 text-left"><span t-esc="dict_lines[dicto].get('@unidad', dict_lines[dicto].get('@Unidad', '0.0'))"></span></td>
                                    <td class="col-xs-1 text-left"><span t-esc="dict_lines[dicto].get('@ClaveProdServ', dict_lines[dicto].get('@ClaveProdServ', '0.0'))"/></td>
                                    <td class="col-xs-5 text-left">
                                        <span t-esc="dict_lines[dicto].get('@descripcion', dict_lines[dicto].get('@Descripcion', '0.0'))"></span>
                                        <!-- FIXME: I'm doing a workaround here using InformacionAduanera OR cfdi:InformacionAduanera because when
                                        the invoice have many lines the "cfdi:" prefix of the InformacionAduanera element is not being removed -->
                                        <t t-set="customs_info" t-value="dict_lines[dicto].get('InformacionAduanera', []) or dict_lines[dicto].get('cfdi:InformacionAduanera', [])"/>
                                        <t t-if="not isinstance(customs_info, list)">
                                            <t t-set="customs_info" t-value="[customs_info]"/>
                                        </t>
                                       <t t-if="version == '3.2'">
                                            <t t-foreach="range(0,len(customs_info))" t-as="numcus">
                                                <br/>
                                                <i>Customs</i>:
                                                <span t-esc="customs_info[numcus].get('@aduana', '')"/>
                                                / <i>Customs Date</i>:
                                                <span t-esc="customs_info[numcus].get('@fecha', '')"/>
                                                / <i>Pedimento</i>:
                                                <span t-esc="customs_info[numcus].get('@numero', '')"/>
                                            </t>
                                        </t>
                                        <t t-if="version == '3.3'">
                                            <t t-foreach="range(0,len(customs_info))" t-as="numcus">
                                                <br/>
                                                <i>Pedimento</i>:
                                                <span t-esc="customs_info[numcus].get('@NumeroPedimento', '')"/>
                                            </t>
                                        </t>
                                    </td>
                                    <td class="col-xs-2 text-right"><span t-esc="formatLang(float(dict_lines[dicto].get('@valorUnitario', dict_lines[dicto].get('@ValorUnitario', '0.0'))),digits=4, grouping=True)"></span></td>
                                    <td class="col-xs-2 text-right"><span t-esc="formatLang(float(dict_lines[dicto].get('@importe', dict_lines[dicto].get('@Importe', '0.0'))),digits=2, grouping=True)"></span></td>
                                </tr>
                            </t>
                        </table>
                    </div>
                    <div t-if="o.model_source == 'account.bank.statement.line'">
                        <table class="table table-striped" style="font-size:9px; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th class="text-center bg-primary">Invoice</th>
                                    <th class="text-center bg-primary">UUID</th>
                                    <th class="text-center bg-primary">Partiality</th>
                                    <th class="text-center bg-primary">Previous balance</th>
                                    <th class="text-center bg-primary">Amount Paid</th>
                                    <th class="text-center bg-primary">Balance</th>
                                    <th class="text-center bg-primary">Currency</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="dict_lines" t-value="dict_data.get('Complemento', {}).get('Pagos', {}).get('Pago', ()).get('DoctoRelacionado', ())"/>
                                <t t-if="not isinstance(dict_lines, list)">
                                    <t t-set="dict_lines" t-value="[dict_lines]"/>
                                </t>
                                <tr t-foreach="range(0,len(dict_lines))" t-as="inv">
                                    <t t-set="line" t-value="dict_lines[inv]"/>
                                    <td><span t-esc="get_invoice_by_uuid(line.get('@IdDocumento', ''))"/></td>
                                    <td><span t-esc="line.get('@IdDocumento', '')"/></td>
                                    <td class="text-right"><span t-esc="line.get('@NumParcialidad', '')"/></td>
                                    <td class="text-right"><span t-esc="line.get('@ImpSaldoAnt', '')"/></td>
                                    <td class="text-right"><span t-esc="line.get('@ImpPagado', '')"/></td>
                                    <td class="text-right"><span t-esc="line.get('@ImpSaldoInsoluto', '')"/></td>
                                    <td><span t-esc="line.get('@MonedaDR', '')"/></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <div class="row col-xs-offset-9 col-xs-3">
                            <table class="col-xs-12" style="font-size:10px">
                                <tr t-if="o.model_source == 'account.invoice'">
                                    <th class="text-left" style="border-top: solid 1.5px #5689bc;"><span>Sub Total</span></th>
                                    <td class="text-right" style="border-top: solid 1.5px #5689bc;"><span t-esc="formatLang(float(dict_data.get('@subTotal', dict_data.get('@SubTotal', '0.0'))),digits=2, grouping=True)"/></td>
                                </tr>
                                <t t-set="desc_amount" t-value="float(dict_data.get('@descuento', False))"/>
                                <t t-if="desc_amount > 0">
                                    <tr>
                                        <th class="text-left" style="border-top: solid 1.5px #5689bc;"><span>Discount</span></th>
                                        <td class="text-right" style="border-top: solid 1.5px #5689bc;"><span t-esc="formatLang(float(dict_data.get('@descuento', dict_data.get('@Descuento', '0.0'))),digits=2, grouping=True)"/></td>
                                    </tr>
                                </t>
                                <t t-if="dict_data.get('Impuestos', {}).has_key('Traslados')">
                                    <t t-set="dict_imp" t-value="dict_data.get('Impuestos', {}).get('Traslados', {}).get('Traslado', False)"/>
                                    <t t-if="not isinstance(dict_imp, list)">
                                        <t t-set="dict_imp" t-value="[dict_data.get('Impuestos', {}).get('Traslados', {}).get('Traslado', False)]"/>
                                    </t>
                                    <t t-foreach="range(0,len(dict_imp))" t-as="imp">
                                        <t t-set="imp_amount" t-value="float(dict_imp[imp].get('@importe', dict_imp[imp].get('@Importe', False)))"/>
                                        <t t-if="imp_amount > 0">
                                            <tr>
                                                <th class="text-left" style="border-top: solid 1.5px #5689bc;">
                                                <t t-set="imp_name" t-value="dict_imp[imp].get('@impuesto', dict_imp[imp].get('@Impuesto', False))"/>
                                                <t t-set="imp_name" t-value="{'001': 'ISR', '002': 'IVA', '003': 'IEPS'}.get(imp_name, imp_name)"/>
                                                <t t-set="tasa" t-value="dict_imp[imp].get('@tasa', dict_imp[imp].get('@TasaOCuota', False))"/>
                                                <t t-set="text" t-value="imp_name+' ('+tasa+') %'"/>
                                                <span t-esc="text or '0.0'"/> </th>
                                                <td class="text-right" style="border-top: solid 1.5px #5689bc;">
                                                    <t t-set="importe" t-value="dict_imp[imp].get('@importe', dict_imp[imp].get('@Importe', False))"/>
                                                    <span t-esc="formatLang(float(importe or '0.0'),digits=2, grouping=True)"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="dict_data.get('Impuestos', {}).has_key('Retenciones')">
                                    <t t-set="dict_ret" t-value="dict_data.get('Impuestos', {}).get('Retenciones', {}).get('Retencion', False)"/>
                                    <t t-if="not isinstance(dict_ret, list)">
                                        <t t-set="dict_ret" t-value="[dict_data.get('Impuestos', {}).get('Retenciones', {}).get('Retencion', False)]"/>
                                    </t>
                                    <t t-foreach="range(0,len(dict_ret))" t-as="ret">
                                        <t t-set="ret_amount" t-value="float(dict_ret[ret].get('@importe', dict_ret[ret].get('@Importe', False)))"/>
                                        <t t-if="ret_amount > 0">
                                            <tr style="padding-top: 0.3em; padding-bottom: 0.3em;">
                                                <th class="text-left" style="border-top: solid 1.5px #5689bc;">
                                                <t t-set="ret_name" t-value="dict_ret[ret].get('@impuesto', dict_ret[ret].get('@Impuesto', ''))"/>
                                                <t t-set="ret_name" t-value="{'001': 'ISR', '002': 'IVA', '003': 'IEPS'}.get(ret_name, ret_name)"/>
                                                <span t-esc="_('Ret. %s' % (ret_name or '' ))"/> </th>
                                                <td class="text-right" style="border-top: solid 1.5px #5689bc;">
                                                    <span t-esc="formatLang(float(ret_amount or '0.0'),digits=2, grouping=True)"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                                <tr align="left">
                                    <th class="text-left" style="border-top: solid 1.5px #5689bc;"><b><span t-esc="_('Total')"/></b></th>
                                    <t t-set="total" t-value="dict_data.get('@total', dict_data.get('@Total', '0.0'))"/>
                                    <t t-if="o.model_source == 'account.bank.statement.line'">
                                        <t t-set="total" t-value="dict_data.get('Complemento', {}).get('Pagos', {}).get('Pago', ()).get('@Monto', '')"/>
                                    </t>
                                    <td class="text-right" align="right" style="border-top: solid 1.5px #5689bc;"><b><span t-esc="formatLang(float(total),digits=2, grouping=True)"/></b></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row" style="font-size: 10;">
                        <div class="col-xs-12">
                            <span>Amount In Letters</span>
                        </div>
                        <div class="col-xs-12 text-center">
                            <span t-esc="'*( %s )*' % (amount_to_text(float(total.encode('ascii','replace')),dict_data.get('@Moneda', '')))"></span>
                        </div>
                        <div class="col-xs-12">
                            <p class="text-center">Deadline for returns of 15 calendar days from delivery. Product must be presented in original packaging. Warranties: American 1 year parts and 5 years compressor equipment. Asia 1 year parts and compressor equipment. Does not apply to equipment with power failures or burns.</p>
                            <t t-if="dict_context_extra_data.get('comment', '')">
                                <p><strong>Notes</strong>: <span t-esc="dict_context_extra_data.get('comment', '')"/></p>
                            </t>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em; font-size: 12;">
                        <div class="col-xs-4" style="padding-left: 0.0em; padding-right: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Fiscal Folio</span>
                            </div>
                        </div>
                        <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Account Last 4 Numbers</span>
                            </div>
                        </div>
                        <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Issuer Certificate</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div>
                            <div class="col-xs-4" style="padding-left: 0.0em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="dict_data.get('Complemento', {}).get('TimbreFiscalDigital').get('@UUID', 'No identificado')"/>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.2em; padding-left: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="invoice_obj.acc_payment.last_acc_number"/>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-right: 0.0em; padding-left: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="dict_data.get('@noCertificado', dict_data.get('@NoCertificado', 'No identificado'))"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em; font-size: 12;">
                        <div>
                            <div class="col-xs-4" style="padding-left: 0.0em; padding-right: 0.2em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Form of Payment</span>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-left: 0.2em; padding-right: 0.2em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>Date Stamp</span>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-left: 0.2em; padding-right: 0.0em;">
                                <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                    <span>SAT Certificate</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <t t-set="tfd" t-value="dict_data.get('Complemento', empty_dict).get('TimbreFiscalDigital', empty_dict)"/>
                        <div>
                            <div class="col-xs-4" style="padding-left: 0.0em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <t t-if="o.model_source == 'account.invoice'">
                                        <span t-esc="invoice_obj.pay_method_id.code"/><span t-esc="invoice_obj.pay_method_id.name"/>
                                    </t>
                                    <t t-if="o.model_source == 'account.bank.statement.line'">
                                        <span t-esc="get_payment_method(dict_data.get('Complemento', {}).get('Pagos', {}).get('Pago', {}).get('@FormaDePagoP', ''))"/>
                                    </t>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-left: 0.2em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="'%s' % dict_data.get('Complemento', {}).get('TimbreFiscalDigital', {}).get('@FechaTimbrado', False) and datetime.strptime(dict_data.get('Complemento', {}).get('TimbreFiscalDigital', {}).get('@FechaTimbrado').encode('ascii','replace'), '%Y-%m-%dT%H:%M:%S').strftime('%d/%m/%Y %H:%M:%S') or 'No identificado'"/>
                                </div>
                            </div>
                            <div class="col-xs-4" style="padding-left: 0.2em; padding-right: 0.0em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                    <span t-esc="tfd.get('@noCertificadoSAT', tfd.get('@NoCertificadoSAT', 'No identificado'))"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em; font-size: 12;">
                        <div class="col-xs-6" style="padding-left: 0.0em; padding-right: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Payment Method</span>
                            </div>
                        </div>
                        <div class="col-xs-6" style="padding-right: 0.2em; padding-left: 0.2em;">
                            <div class="text-center bg-primary" style="border-top-right-radius: 0.4em; border-top-left-radius: 0.4em; padding-top: 0.0em;">
                                <span>Use</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div>
                            <div class="col-xs-6" style="padding-left: 0.0em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                        <t t-if="invoice_obj.l10n_mx_payment_police == 'PPD'">
                                            <span> PPD Payment in partials or deferred</span>
                                        </t>
                                        <t t-if="invoice_obj.l10n_mx_payment_police == 'PUE'">
                                            <span> PUE Payment in single exhibition</span>
                                        </t>
                                        <t t-if="invoice_obj.l10n_mx_payment_police != 'PUE' and invoice_obj.l10n_mx_payment_police != 'PPD'">
                                            <span t-esc="invoice_obj.l10n_mx_payment_police"/>
                                        </t>
                                </div>
                            </div>
                            <div class="col-xs-6" style="padding-left: 0.2em; padding-right: 0.2em;">
                                <div class="text-center" style="border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; border: 2px solid #deeff5; padding-top: 0.0em; font-size: 10;">
                                        <span t-esc="invoice_obj.l10n_mx_edi_usage"/><span t-esc="invoice_obj.with_context({'lang': o.report_lang}).get_human_value('l10n_mx_edi_usage', invoice_obj.l10n_mx_edi_usage)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 0.5em;">
                        <div class="col-xs-12 img-rounded" style="page-break-inside:avoid; border: 2px solid #deeff5;">
                            <div class="col-xs-3" style="float:left; padding-top: 0.3em; padding-bottom: 0.3em;">
                                <t t-set="img" t-value="create_qrcode(emitter.get('@rfc', emitter.get('@Rfc', '')), receiver.get('@rfc', receiver.get('@Rfc', '')), float(dict_data.get('@total', dict_data.get('@Total', '')).encode('ascii','replace')), dict_data.get('Complemento', {}).get('TimbreFiscalDigital', {}).get('@UUID', ''))"/>
                                <img t-if="img" t-att-src="'data:image/png;base64,%s' % img" style="max-height: 150; max-width: 150;"/>
                            </div>
                            <div class="col-xs-9" style="font-size:8px">
                                <br/>
                                <div style="padding-top: 0.3em; padding-bottom: 0.3em;">
                                    <strong>Digital Stamp Issuer</strong>
                                    <br/>
                                    <span t-esc="split_string( dict_data.get('@sello', dict_data.get('@Sello', '')))"/>
                                </div>
                                <div style="padding-top: 0.3em; padding-bottom: 0.3em;">
                                    <strong>Digital Stamp SAT</strong>
                                    <br/>
                                    <span t-esc="split_string(tfd.get('@selloSAT', tfd.get('@SelloSAT', '')))"/>
                                </div>
                                <div style="padding-top: 0.3em; padding-bottom: 0.3em;">
                                    <strong>Original String</strong>
                                    <br/>
                                    <span t-esc="split_string( o.cfdi_cadena_original ) or ''"/>
                                </div>
                                <div style="padding-top: 0.3em; padding-bottom: 0.3em;">
                                    <strong>Certificate Link</strong>
                                    <br/>
                                    <span t-esc="split_string( o.certificate_link) or ''"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <p style="page-break-after:always"></p>
        </template>

        <template id="report_electronic_invoice">
            <t t-foreach="doc_ids" t-as="doc_id">
                <t t-raw="translate_doc(doc_id, doc_model, 'report_lang','typ.report_electronic_invoice_document')"/>
            </t>
        </template>
    </data>
</openerp>
