<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="categories-header">
        <div class="background-category-section">
            <div class="category-img">
                <img t-if="category.cover_img" t-att-src="'/website/image/product.public.category/%s/cover_img' % (category.id)" t-att-alt="category.name" />
                <img t-else="" class="img-default" src="/web/image/theme_typ.default-cover" t-att-alt="category.name" />
            </div>
            <div class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-lg-8 col-lg-offset-2 col-xs-10 col-xs-offset-1" >
                <div class="text-center mt8 category-header">                        
                    <p t-esc="category.name" class="category-name"/>                         
                </div> 
            </div>
        </div>
    </template>

    <template id="products_list" inherit_id="website_sale.products">
         
        <!-- Products list background -->
        <xpath expr="//div[@id='wrap']"  position='attributes'>
            <attribute name="t-attf-class" add="#{'' if (category and category.child_id and not category.parent_id) or (search and not bins)  else 'dark-white'}" separator=" "/>
        </xpath>

        <!-- featured products in parent category -->
        <xpath expr="//div[hasclass('oe_website_sale')]"  position='after'>
            <t t-call="typ.featured-products"  t-if="category and category.child_id and not category.parent_id" />
        </xpath>

        <xpath expr="/t[1]/t[1]/div[1]/div[2]/div[2]/div[2]/t[1]/div[1]" position="replace">
            <!-- not found message -->
            <section class="s_body_content text-center" t-if="search and not bins">
                <div class="container text-center">
                    <div class="col-md-12 col-sm-12 col-xs-12 search-text mt32">
                        <div class="row">
                            <h3 class="sections">No results for "<span t-esc="search"></span>"</h3>
                            
                        </div>
                        <div class="row mt24 mb24">
                            <p>
                                We did not find a result that match with what you are looking for.<br/> 
                                Please check spelling or get in contact with us<br/>
                                to verify the existence of the product.
                            </p>
                        </div>
                        <div class="row search-words">
                            <p>
                                Your search: <span t-esc="search"></span>
                            </p>
                        </div>
                        <div class="row">
                            <div class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 hidden-xs mt48 mb64">
                                <a class="btn btn-secondary btn-lg mb8" href="/contactus">Ask for product</a>
                            </div>
                            <div class="col-xs-12 hidden-md hidden-sm hidden-lg mt32 mb48">
                                <a class="btn btn-secondary btn-block mb8" href="/contactus">Ask for product</a>
                            </div>
                        </div>
                    </div>
              </div>
            </section>
        </xpath>
       <xpath expr="//div[@id='wrap']"  position='attributes'>
            <attribute name="class" add="mt32"  separator=" "/>
        </xpath>

        <xpath expr="//div[hasclass('oe_website_sale')]"  position='after'>
            <t t-call="typ.featured-products"  t-if="search and not bins" />
        </xpath>

        
       
         <!-- dropdown public pricelist delted -->
        <xpath expr="//div[@id='wrap']//div[2]//div//div" position="replace"/>

        <xpath expr="//div[@id='products_grid']" position='attributes'>
            <attribute name="class" add="col-xs-12 col-sm-12"  separator=" "/>
        </xpath>

        <!-- product found -->
        <xpath expr="/t[1]/t[1]/div[1]/div[2]/div[2]/div[2]/table" position="before">
             <t t-if="search and bins">
                <div class="row text-center">
                    <h5 class="sections hidden-md hidden-sm hidden-lg mt16 mb16">SEARCH RESULTS</h5>
                    <h5 class="sections hidden-xs mt32 mb32">SEARCH RESULTS</h5>
                </div>                
                <div class="col-sm-12 col-xs-12 search-options">
                    <div class="col-sm-3 col-xs-12 mb8">
                        <div class="row search-words">
                            <p class="hidden-xs">
                                Your Search: <span t-esc="search"></span>
                            </p>
                            <p class="hidden-sm hidden-md hidden-lg mt8 text-center">
                                Your Search: <span t-esc="search"></span>
                            </p>
                        </div>
                    </div>
                    <div class="col-sm-4 col-sm-offset-5 col-xs-12 col-xs-offset-0 sort-products">
                        <!-- sort by -->                        
                        <div class="row text-right text-right-not-xs">
                            <t t-set="id_desc_label">New Arrivals</t>
                            <t t-set="list_price_desc_label">Price: Highest</t>
                            <t t-set="list_price_asc_label">Price: Lowest</t>
                            <t t-set="website_sale_sortable" t-value="[
                                    (id_desc_label, 'id desc'),
                                    (list_price_asc_label, 'list_price asc'),
                                    (list_price_desc_label, 'list_price desc'),
                                    ('A - Z', 'name asc'),
                                    ('Z - A', 'name desc'),
                                ]"/>
                            <span class="mr16 filter">Sort by:</span>
                            <div class="dropdown btn-group dropdown_filters">
                                <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                                    <span t-if="not sort_by">Sort by</span>
                                    <span t-elif="sort_by == 'id desc'" t-esc="id_desc_label"/>
                                    <span t-elif="sort_by == 'list_price asc'" t-esc="list_price_asc_label"/>
                                    <span t-elif="sort_by == 'list_price desc'" t-esc="list_price_desc_label"/>
                                    <span t-elif="sort_by == 'name asc'" t-esc="website_sale_sortable[3][0]"/>
                                    <span t-elif="sort_by == 'name desc'" t-esc="website_sale_sortable[4][0]"/>                            
                                    <i class="fa fa-chevron-down pull-right"/>
                                </a>
                                <ul class="dropdown-menu" role="menu">
                                    <li t-foreach="website_sale_sortable" t-as="sortby">
                                        <a t-att-href="keep('/shop', order=sortby[1], sort_by=sortby[0])">
                                            <span t-raw="sortby[0]"/>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </t> 
        </xpath>

        <xpath expr="//div[hasclass('oe_website_sale')]" position="before">
            
            <t t-if="not (search or category or product or pager['page']['num'] != 1)">
                <div class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-lg-8 col-lg-offset-2 col-xs-12 col-xs-offset-0" >
                    <div class="text-center mt32 mb32 category-header hidden-xs">                        
                        <p class="category-name">All Products</p>                         
                    </div> 
                    <div class="text-center mt24 mb24 category-header hidden-md hidden-sm hidden-lg">                        
                        <p class="category-name">All Products</p>                         
                    </div> 
                </div>
            </t>   
            <t t-elif="category">
                    <t t-if="category and category.child_id"> 
                        <t t-call="typ.categories-header"/> 
                    </t>
                    <t t-else="">
                        <t t-call="typ.categories-header"/>
                    </t>
            </t>                                 
        </xpath>

        <xpath expr="//div[@id='products_grid']//table" position="replace">
            <t t-if="category">
                <!-- Parent category template-->
                <t t-if="category and category.child_id and not category.parent_id"> 
                    <div class="container text-center subcategories-section prod-cat-list">
                        <div class="">                            
                            <t t-set="root_categories_list" t-value="env['product.public.category'].search([('parent_id', '=', int(category)),('landing_category','=', True)])"/>
                            <t t-call="typ.categories-list"/> 
                        </div>
                    </div>
                </t>
                <t t-else=""> 
                    <!-- template subcategories -->
                    <t t-call="typ.breadcrumb-categories"/>                  
                    <t t-call="typ.sort_products"/>
                    <t t-call="typ.products-list"/> 
                </t>  
            </t>
            <t t-elif="search">
                <t t-call="typ.products-list"/> 
            </t>
            <t t-else="">
                <div class="container text-center subcategories-section">
                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 sort-products text-left">
                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <div class="row">
                                <span class="filter filter_by">Filter by: </span>
                                <div class="dropdown btn-group  dropdown_filters">
                                    <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                                        <span>Categories</span> 
                                        <i class="fa fa-chevron-down pull-right"/>                          
                                    </a>                                    
                                    <ul class="dropdown-menu" role="menu">
                                    <t t-set="root_categories" t-value="env['product.public.category'].search([('parent_id', '=', None)])"/>
                                        <li t-foreach="root_categories" t-as="c">
                                                <t t-set="characters" t-value=" c.name if len(c.name) &lt; 15 else c.name[:16]+'...'"/>
                                                <a t-att-href="'/shop/category/' + slug(c)" t-esc="characters"/>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb64">
                        <t t-call="typ.products-list"/> 
                    </div>
                </div>
            </t>
        </xpath>      
    </template>

    <template id="breadcrumb-categories">
        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mt16">
            <ol class="breadcrumb mb0 no-padding-left">
                <li t-if="not category">
                    <a t-att-href="keep(category=0)">Products</a>
                </li>
                <li t-if="category and category.parent_id.parent_id.parent_id.parent_id">
                    <a t-att-href="'/shop/category/%s' % slug(category.parent_id.parent_id.parent_id.parent_id)" t-field="category.parent_id.parent_id.parent_id.parent_id.name" />
                </li> 
                <li t-if="category and category.parent_id.parent_id.parent_id">
                    <a t-att-href="'/shop/category/%s' % slug(category.parent_id.parent_id.parent_id)" t-field="category.parent_id.parent_id.parent_id.name" />
                </li>  
                <li t-if="category and category.parent_id.parent_id">
                    <a t-att-href="'/shop/category/%s' % slug(category.parent_id.parent_id)" t-field="category.parent_id.parent_id.name" />
                </li>                     
                <li t-if="category and category.parent_id">
                    <a t-att-href="'/shop/category/%s' % slug(category.parent_id)" t-field="category.parent_id.name" />
                </li>
                <li t-if="category" class="active">
                    <span t-field="category.name" />
                </li>
            </ol>
        </div>
    </template>

    <template id="categories-list">
        <t t-foreach="root_categories_list" t-as="c">
            <div  class="col-md-3 col-sm-3 col-lg-3 col-xs-6">
                <a class="category-card" t-att-name="'id_category%d' % c_index" t-att-href="'/shop/category/' + slug(c)">
                <t t-set="categ_url" t-value="'/shop/category/' + slug(c)"/>
                    <div class="img-category"> 
                        <img class="mt16 mb16" t-att-src="'/website/image/product.public.category/%s/image' % (c.id)" t-att-alt="c.name" />
                    </div>
                    <div class="hidden-xs button-category category-hover mb32">
                        <button class="btn btn-products-list btn-primary" t-field='c.name' />
                    </div>
                    <div class="hidden-sm hidden-md hidden-lg button-category mb16">
                        <button class="btn btn-sm" t-field='c.name' />
                    </div>
                </a>
            </div>
        </t>
    </template>

    <template id="products-list">
        <t t-foreach="products" t-as="product">
            <div t-att-data-publish="product.website_published and 'on' or 'off'" t-attf-class="col-lg-3 col-md-3 col-sm-3 col-xs-6 product-div">
                <a itemprop="url" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))">
                    <form action="/shop/cart/update" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <!-- product-card -->
                            <div itemscope="itemscope" itemtype="http://schema.org/Product" t-attf-class="#{ 'product-card' if website.user_id != user_id else 'product-card-users'}">
                                <div class="text-center">
                                    <div class="oe_product_image">                                        
                                        <span itemprop="image" t-attf-content="{{request.httprequest.url_root}}web/image/product.template/{{product.id}}/image" t-field="product.image" t-options="{'widget': 'image', 'resize': None if product_image_big else '300x300', 'zoom': 'image'}" t-att-alt="product.name" />
                                        <div class="button-category hidden-xs">
                                            <p class="btn btn-products-list btn-primary">View Details</p>
                                        </div>
                                    </div>
                                    <div class="text-center product-title mt24">
                                        <t t-set="characters" t-value=" product.name if len(product.name) &lt; 30 else product.name[:31]+'...'"/>
                                        <p class="product-name ml8 mr8"  t-esc="characters" itemprop="name"/>                                        
                                    </div>
                                    <!-- Product price -->
                                    <t t-if="website.user_id != user_id" groups="website.group_website_designer" >
                                        <hr/>
                                        <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product-price text-center" t-if="product.product_variant_ids">
                                                <p>
                                                    <t t-if="(compute_currency(product.lst_price) - product.website_price ) &gt; 0.01  and website.get_current_pricelist().discount_policy=='without_discount'">
                                                        <del class="text-danger mr8" style="white-space: nowrap;" t-esc="compute_currency(product.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                                                    </t>
                                                    <span t-esc="product.website_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                    <span itemprop="price" style="display:none;" t-esc="product.website_price" />
                                                    <span itemprop="priceCurrency" t-esc="website.currency_id.name" />
                                                </p>
                                        </div>
                                    </t>                       
                                </div> 
                                <t t-if="show_publish">
                                    <div id="website_published_button" class="" groups="sales_team.group_sale_manager">
                                        <t t-call="website.publish_management">
                                            <t t-set="object" t-value="product" />
                                            <t t-set="publish_edit" t-value="True" />
                                            <t t-set="action" t-value="'product.product_template_action'" />
                                        </t>
                                    </div>
                                </t>
                            </div>
                    </form>
                </a>
            </div>
        </t>    
    </template>

    <!-- Sort -->
     <template id="sort_products" name="Sort Products">
        <!-- filter by -->
        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mb32 sort-products">
            <div t-attf-class="mt16 #{'hidden' if not category.parent_id else 'col-md-4 col-sm-4 col-xs-12'}">
                <div class="row">
                    <span class="filter filter_by">Filter by: </span>
                    <div class="dropdown btn-group  dropdown_filters">
                        <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span t-if="category.parent_id and category.child_id">Everything</span>
                            <t t-else="">
                                <t t-set="characters" t-value=" category.name if len(category.name) &lt; 12 else category.name[:13]+'...'"/>
                                <span t-esc="characters"/>
                            </t> 
                            <i class="fa fa-chevron-down pull-right"/>                          
                        </a>
                        <t t-if="category and category.child_id" t-set="categs" t-value="category.child_id"/>
                        <t t-if="category and category.parent_id and not category.child_id" t-set="categs" t-value="category.parent_id.child_id"/>            
                        <ul class="dropdown-menu" role="menu">
                            <li t-foreach="categs" t-as="c">
                                    <t t-set="characters" t-value=" c.name if len(c.name) &lt; 15 else c.name[:16]+'...'"/>
                                    <a t-att-href="keep('/shop/category/' + slug(c), category=0)" t-esc="characters"/>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- sort by -->
            <div t-attf-class="mt16 sort-by-filter #{'col-md-5 col-md-offset-3 col-sm-5 col-sm-offset-3 col-xs-12 col-xs-offset-0 text-right' if not category.parent_id else 'col-md-4 col-sm-4 col-xs-12'}">
                <div class="row">
                    <t t-set="id_desc_label">New Arrivals</t>
                    <t t-set="list_price_desc_label">Price: Highest</t>
                    <t t-set="list_price_asc_label">Price: Lowest</t>
                    <t t-set="website_sale_sortable" t-value="[
                            (id_desc_label, 'id desc'),
                            (list_price_asc_label, 'list_price asc'),
                            (list_price_desc_label, 'list_price desc'),
                            ('A - Z', 'name asc'),
                            ('Z - A', 'name desc'),
                        ]"/>
                    <span class="mr16 filter">Sort by:</span>
                    <div class="dropdown btn-group dropdown_filters">
                        <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span t-if="not sort_by">Sort by</span>
                            <span t-elif="sort_by == 'id desc'" t-esc="id_desc_label"/>
                            <span t-elif="sort_by == 'list_price asc'" t-esc="list_price_asc_label"/>
                            <span t-elif="sort_by == 'list_price desc'" t-esc="list_price_desc_label"/>
                            <span t-elif="sort_by == 'name asc'" t-esc="website_sale_sortable[3][0]"/>
                            <span t-elif="sort_by == 'name desc'" t-esc="website_sale_sortable[4][0]"/>                            
                            <i class="fa fa-chevron-down pull-right"/>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li t-foreach="website_sale_sortable" t-as="sortby">
                                <a t-att-href="keep('/shop', order=sortby[1], sort_by=sortby[0])">
                                    <span t-raw="sortby[0]"/>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div t-attf-class="col-md-4 col-sm-4 hidden-xs text-right mt16">
                <div class="row">
                    <t t-set="products_20">20 products</t>
                    <t t-set="products_50">50 products</t>
                    <t t-set="all_products">All</t>
                    <t t-set="products_list_qty" t-value="[
                            (products_20, 20),
                            (products_50, 50),
                            (all_products,''),
                        ]"/>                    
                    <span class="mr16 filter">Visualize: </span>
                    <div class="dropdown btn-group dropdown_filters">
                       <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span t-if="not ppg">All</span>
                            <t t-else="">
                                <span class="mr0" t-esc="ppg"/><span> products</span>
                            </t>                            
                            <i class="fa fa-chevron-down pull-right"/>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li t-foreach="products_list_qty" t-as="see">
                                <a t-att-href="keep('/shop',ppg=see[1])">
                                    <span t-raw="see[0]"/>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
    </template>


    <!-- Pagination arrows -->
    <template id="pagination-prev-next" inherit_id="portal.pager">
        <xpath expr="//ul[1]/li[1]/a[1]" position="replace">
            <a t-att-href=" pager['page_previous']['url'] if pager['page']['num'] != 1 else None">&lt;</a>
        </xpath>

        <xpath expr="//ul[1]/li[2]/a[1]" position="replace">
            <a  t-att-href="pager['page_next']['url'] if pager['page']['num'] != pager['page_count'] else None">&gt;</a>
        </xpath>
    </template>


    <!-- cart -->   
    <template id="cart_layout" inherit_id="website_sale.cart">
    
        <xpath expr="//div[@id='wrap']/div/div/div"  position="attributes">
            <attribute name="class" add="col-md-12 col-sm-12 col-lg-12 col-xs-12" remove="col-md-8 col-md-offset-2" separator=" "/>
        </xpath>
                 
        <xpath expr="//div[@id='wrap']/div/div/div/div[2]"  position="attributes">
            <attribute name="class" add="text-center" separator=" "/>
        </xpath>

        <xpath expr="//div[@id='wrap']/div/div/div/div[2]/div/h2"  position="replace">
            <h3 class="sections mt32 mb32">SHOPPING CART</h3>
        </xpath>
      
        <xpath expr="//div[@id='wrap']//div/a[starts-with(@t-if, 'not optional_products and website_sale_order')]" position="replace"/> 

         <!-- delete bar with steps to buy -->
        <xpath expr="//div[@id='wrap']/div/div/div/div"  position="replace"/>
    
        <xpath expr="//div[hasclass('o_website_sale_rightfit')]/a"  position="replace"/>


        <xpath expr="//div[hasclass('oe_website_sale')]"  position='after'>
            <t t-call="typ.featured-products"  t-if="request.httprequest.path == '/shop/cart' and (not optional_products and website_sale_order and website_sale_order.website_order_line) " />
        </xpath>
               
    </template>

    

    <template id="cart_lines" inherit_id="website_sale.cart_lines">
        <xpath expr="//table" position="replace">
            <div class="my-cart-typ mb8 js_cart_lines" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
                <div class="row text-center cart-products-title hidden-xs ">                    
                    <div class="col-sm-3 col-sm-offset-2 mt32 mb32">
                        <p>Product</p>
                    </div>
                    <div class="col-sm-2 mt32 mb32">
                        <p>Price</p>
                    </div>
                    <div class="col-sm-2 mt32 mb32">
                        <p>Quantity</p>
                    </div>
                    <div class="col-sm-2 mt32 mb32">
                        <p>Subtotal</p>
                    </div>
                </div>
                <!-- products list -->
                <div class="products-table hidden-xs">             
                    <t t-foreach="website_sale_order.website_order_line" t-as="line">
                        <div class="row">                    
                            <div class="col-sm-1 col-sm-offset-1 mt32 mb32">
                                <a t-attf-href="/shop/product/#{ slug(line.product_id.product_tmpl_id) }">
                                    <span t-field="line.product_id.image_small" t-options="{'widget': 'image', 'class': 'img-rounded'}" />
                                </a>
                            </div>
                            <div class="col-sm-3 mt32 mb32">
                                <t t-set="characters" t-value="line.product_id.with_context(display_default_code=False).display_name if len(line.product_id.with_context(display_default_code=False).display_name) &lt; 30 else line.product_id.with_context(display_default_code=False).display_name[:31]+'...'"/>
                                <p t-esc="characters"/> 
                            </div>
                            <div class="col-sm-2 mt32 mb32">
                                <t t-set="taxed_price" t-value="line.product_id.product_tmpl_id.lst_price"/>                                    
                                <p class="unitary-price" t-field="line.price_reduce_taxexcl" t-options="{
                                    'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id,
                                    'display_currency': website.currency_id}" groups="sale.group_show_price_subtotal" />
                                <p t-field="line.price_reduce_taxinc" t-options="{
                                    'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id,
                                    'display_currency': website.currency_id}" groups="sale.group_show_price_total" />  
                            </div>
                            <div class="col-sm-2 mt32 mb32">
                                <div class="css_quantity input-group oe_website_spinner">
                                    <a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json hidden-xs">
                                        <i class="fa fa-minus"></i>
                                    </a>
                                    <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                                    <a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json hidden-xs">
                                        <i class="fa fa-plus"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="col-sm-2 mt32 mb32 subtotal-product">
                                        <p class="taxed-price" t-esc="line.price_reduce_taxexcl * line.product_uom_qty"  style="white-space: nowrap;" t-options='{
                                    "widget": "monetary",
                                    "display_currency": website.currency_id
                                }'/>
                            </div>
                            <div class="col-sm-1 mt32 mb32">
                                <a href='#' class='js_delete_product no-decoration'><img src="/web/image/theme_typ.delete-icon" alt="Delete item"/></a>
                            </div>
                        </div>
                    </t>
                </div> 
                <!-- Products mobile -->
                <div class="products-table hidden-md hidden-sm hidden-lg">             
                    <t t-foreach="website_sale_order.website_order_line" t-as="line">
                        <div class="row">                    
                            <div class="col-xs-3 mt8 mb8">
                                <a t-attf-href="/shop/product/#{ slug(line.product_id.product_tmpl_id) }">
                                    <span t-field="line.product_id.image_small" t-options="{'widget': 'image', 'class': 'img-rounded'}" />
                                </a>
                            </div>
                            <div class="col-xs-9 mt8 mb8">
                                <div class="row text-left">
                                    <t t-set="characters" t-value="line.product_id.with_context(display_default_code=False).display_name if len(line.product_id.with_context(display_default_code=False).display_name) &lt; 23 else line.product_id.with_context(display_default_code=False).display_name[:24]+'...'"/>
                                    <p t-esc="characters"/> 
                                </div>
                               <div class="row">
                                    <div class="col-xs-3 text-left no-padding-left">
                                        <t t-set="taxed_price" t-value="line.product_id.product_tmpl_id.lst_price"/>                                    
                                        <p class="unitary-price" t-field="line.price_reduce_taxexcl" t-options="{
                                            'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id,
                                            'display_currency': website.currency_id}" groups="sale.group_show_price_subtotal" />
                                        <p t-field="line.price_reduce_taxinc" t-options="{
                                            'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id,
                                            'display_currency': website.currency_id}" groups="sale.group_show_price_total" />  
                                    </div>
                                    <div class="col-xs-1 no-padding-left">
                                        <p class="text-right">x</p>
                                    </div>
                                    <div class="col-xs-2 no-padding-left">
                                        <div class="css_quantity input-group oe_website_spinner">
                                            <a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json hidden-xs">
                                                <i class="fa fa-minus"></i>
                                            </a>
                                            <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                                            <a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json hidden-xs">
                                                <i class="fa fa-plus"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-xs-4 subtotal-product">
                                        <p class="taxed-price" t-esc="line.price_reduce_taxexcl * line.product_uom_qty"  style="white-space: nowrap;" t-options='{
                                            "widget": "monetary",
                                            "display_currency": website.currency_id
                                        }'/>
                                    </div>
                                    <div class="col-xs-1 no-padding-left">
                                        <a href='#' class='js_delete_product no-decoration'><img src="/web/image/theme_typ.delete-icon" alt="Delete item"/></a>
                                    </div> 
                               </div>
                              
                            </div>
                                                       
                        </div>
                    </t>
                </div> 
            </div>            
        </xpath>

       <xpath expr="//table" position="replace"/>
       <xpath expr="//h5" position="replace"/>

       
        <xpath expr="//input[hasclass('js_quantity', 'form-control', 'quantity')]" position="attributes">
            <attribute name="maxlength">4</attribute>
        </xpath>

        <xpath expr="//div[hasclass('js_cart_lines','row')]" position="replace">
            <div class="js_cart_lines row text-center cart-options">
                <div class="row total-title col-md-2 col-md-offset-10 mb8 hidden-xs hidden-sm" t-if="not optional_products and website_sale_order and website_sale_order.website_order_line">
                    <span >Total</span>
                </div>
                <div class="col-md-3 hidden-xs hidden-sm" t-if="not optional_products and website_sale_order and website_sale_order.website_order_line">
                    <a class="delete-order " href="/delete-order">Delete order</a>
                </div>
                <div id="cart_total" class="hidden-md hidden-lg mb24" t-if="website_sale_order and website_sale_order.website_order_line">
                    <div class="row" id="order_total">
                        <div class="col-xs-2 col-xs-offset-5 col-sm-2 col-sm-offset-5 text-center">
                            <span class="total-title">Total</span>        
                        </div>
                        <div class="col-xs-5 col-sm-5 text-center">
                            <span  style="white-space: nowrap;">
                                <div class="row total-order">
                                    <span t-field="website_sale_order.amount_total" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />
                                </div>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4" id="btn-pay">
                    <a t-if="not optional_products and website_sale_order and website_sale_order.website_order_line" class="btn btn-primary btn-block pull-right mb64 mr8 hidden-xs hidden-sm" href="/shop/checkout">
                        <span class="">Pay</span>
                    </a>
                    <a t-if="not optional_products and website_sale_order and website_sale_order.website_order_line" class="hidden-lg hidden-md btn btn-primary btn-block pull-right mb16" href="/shop/checkout">
                        <span class="">Pay</span>
                    </a>
                </div>
                <div class="col-xs-12 hidden-md hidden-lg mb48" t-if="not optional_products and website_sale_order and website_sale_order.website_order_line">
                    <a class="delete-order " href="/delete-order">Delete order</a>
                </div>
                <div id="cart_total" class="hidden-xs hidden-sm" t-if="website_sale_order and website_sale_order.website_order_line">
                    <div class="col-xs-2" id="order_total">
                        <span  style="white-space: nowrap;">
                            <div class="row total-order">
                                <span t-field="website_sale_order.amount_total" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />
                            </div>
                        </span>
                    </div>
                </div>
            </div>
        </xpath>
               
    </template>

    <template id="continue_shopping" inherit_id="website_sale.cart_lines" customize_show="True" name="Continue Shopping Button">
        <xpath expr="//div[@id='btn-pay']" position="before">
            <div class="col-md-3 col-xs-12 hidden-xs hidden-sm">
                <a href="/shop" class="btn btn-secondary btn-block mb32">
                    <span class="">Continue Shopping</span>
                </a>
            </div>
        </xpath>
         <xpath expr="//div[@id='btn-pay']" position="after">
            <div class="col-md-3 col-xs-12 hidden-md hidden-lg mb16">
                <a href="/shop" class="btn btn-secondary btn-block">
                    <span class="">Continue Shopping</span>
                </a>
            </div>
        </xpath>
    </template>

    <template id="featured-products">
         <t t-set="featured_products_ids" t-value="env['product.template'].sudo().search([('is_highlight','=', True)], limit=8)"/>
         <t t-set="featured_products" t-value="env['product.template'].sudo().browse(featured_products_ids.ids)"/>
         <section t-if="len(featured_products)>0" class="s_body_content text-center dark-white featured-products">
                <div class="container text-center">
                    <div class="col-sm-12">
                        <div class="row">
                            <h5 t-if="request.httprequest.path == '/'" class="sections mt32 mb0">FEATURED PRODUCTS</h5>
                            <h3 t-else="" class="sections mt32 mb0">FEATURED PRODUCTS</h3>
                        </div>
                        <!-- mobile view -->                     
                        <div class="col-xs-12 no-padding-right no-padding-left mt24 mb48 hidden-md hidden-sm hidden-lg ">
                            <t t-foreach="featured_products" t-as="product">
                                <t t-if="product_index &lt; 4"> 
                                    <div class="col-xs-6">
                                        <t t-call="typ.my_product_card">
                                            <t t-set="show_publish" t-value="True"/>
                                        </t>
                                    </div>
                                </t>
                            </t>
                        </div>
                        
                        <!-- carousel view --> 
                    <div id="myCarousel" class="carousel slide hidden-xs mt32 mb64" data-ride="carousel">
                        <!-- Wrapper for slides --> 
                        <div class="carousel-inner">
                                <div class="item active">
                                    <t t-foreach="featured_products" t-as="product">
                                        <t t-if="product_index &lt; 4"> 
                                            <div class="col-sm-3 hidden-xs">
                                                <t t-call="typ.my_product_card">
                                                    <t t-set="show_publish" t-value="True"/>
                                                </t>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                                <div t-if="len(featured_products)>4" class="item">
                                    <t t-foreach="featured_products" t-as="product">
                                        <t t-if="product_index &gt;= 4"> 
                                            <div class="col-sm-3 hidden-xs">
                                                <t t-call="typ.my_product_card">
                                                    <t t-set="show_publish" t-value="True"/>
                                                </t>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                            </div>

                            <!-- Left and right controls -->
                            <a t-if="len(featured_products)>4" class="right carousel-control" href="#myCarousel" data-slide="next">
                                <img class="arrow-right" src="/web/image/theme_typ.arrow-right-icon" alt="Next"/> 
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
              </div>
            </section>
    </template>

    <template id="my_product_card">
        <a t-att-href="'/shop/product/' + slug(product)">
            <!-- product-card -->
            <div itemscope="itemscope" itemtype="http://schema.org/Product" t-attf-class="#{ 'product-card' if website.user_id != user_id else 'product-card-users mb8'}">
                <div class="text-center">
                    <div class="oe_product_image">                                        
                        <span itemprop="image" t-attf-content="{{request.httprequest.url_root}}web/image/product.template/{{product.id}}/image" t-field="product.image" t-options="{'widget': 'image', 'resize': None if product_image_big else '300x300', 'zoom': 'image'}" t-att-alt="product.name" />
                        <a t-att-href="'/shop/product/' + slug(product)" class="button-category hidden-xs">
                            <p class="btn btn-products-list btn-primary">View Details</p>
                        </a>
                    </div>
                    <div class="text-center product-title mt24">
                        <t t-set="characters" t-value=" product.name if len(product.name) &lt; 30 else product.name[:31]+'...'"/>
                        <p class="product-name ml8 mr8"  t-esc="characters" itemprop="name"/>                                        
                    </div>
                    <!-- Product price -->
                <t t-if="website.user_id != user_id">
                        <hr/>
                        <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product-price text-center" t-if="product.product_variant_ids">
                                <p>                              
                                    <span t-esc="product.website_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                    <span itemprop="price" style="display:none;" t-esc="product.website_price" />
                                    <span itemprop="priceCurrency" t-esc="website.currency_id.name" />
                                </p>
                        </div>
                    </t>                       
                </div> 
                <t t-if="show_publish">
                    <div id="website_published_button" class="" groups="sales_team.group_sale_manager">
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="product" />
                            <t t-set="publish_edit" t-value="True" />
                            <t t-set="action" t-value="'product.product_template_action'" />
                        </t>
                    </div>
                </t>
            </div>
        </a>
    </template>

    

    <template id="cart_delivery" inherit_id="website_sale_delivery.cart_delivery">
        <xpath expr="//div/span" position="attributes">
            <attribute name="class" add="text-field" remove="text-muted" separator=" "/>
        </xpath>
        <xpath expr="//div/span[2]" position="attributes">
            <attribute name="class" add="text-content" remove="text-muted" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='order_delivery']" position="attributes">
            <attribute name="class" add="mt8" separator=" "/>
        </xpath>
    </template>


    

    <template id="confirmation" inherit_id="website_sale.confirmation">
        <xpath expr="//div[@id='wrap']"  position='attributes'>
            <attribute name="class" add="dark-white"  separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wrap']/div/div"  position='replace'>
           <div class="text-center mt32">
                <div class="row">
                    <h5 class="sections">Thank you for your order!</h5>
                </div>
                <div class="row mt16">
                    <h6>Your payment has been registred with te following order number</h6>
                </div>
                <div class="row">
                    <h6 t-field="order.name"/>
                </div>
                <div class="row mt16 mb48">
                    <p>All the information to track your order will be sent to your email.</p>
                </div>
           </div>
        </xpath>
        <xpath expr="//div[@id='wrap']"  position='after'>
            <div class="container">
                <div class="row mt32 text-center">
                    <h6>Order details</h6>
                </div>
                <div class="col-md-12 mt24 confirmation-order-info">
                    <div class="col-md-4 contact-information">
                        <div class="row">
                            <h6 class="sections">Ship Address</h6>
                        </div>
                        <div class="row">
                            <p t-field="order.partner_shipping_id" t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                            <p t-if="order.partner_shipping_id.zip">                                                 
                                <span>ZIP. </span><span t-field="order.partner_shipping_id.zip" />
                            </p>
                        </div>
                    </div>

                    <div class="col-md-4 contact-information">
                        <div class="row">
                            <h6 class="sections">Billing Address</h6>
                        </div>
                        <div class="row">
                            <p  t-field="order.partner_invoice_id.name"/>
                            <p t-if="order.partner_invoice_id.vat">                                                 
                                <span>RFC: </span><span t-field="order.partner_invoice_id.vat" />
                            </p>
                            <p t-field="order.partner_invoice_id" t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                            <p t-if="order.partner_invoice_id.zip">                                                 
                                <span>ZIP. </span><span t-field="order.partner_invoice_id.zip" />
                            </p>                            
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="row">
                            <h6 class="sections">Payment method</h6>
                        </div>
                        <div class="row mb16">
                            <t t-if="order.payment_acquirer_id.name == 'Conekta'">
                                    <p class="mb0">Credit/Debit Card</p>
                            </t>
                            <p t-else="" class="mb0" t-field="order.payment_acquirer_id.name"/>
                        </div>
                        <div class="row payment-information">
                            <p class="status">Status: 
                                <t t-if="order.payment_tx_id.state == 'pending'">
                                    <span class="text-yellow">Pending</span>
                                </t>
                                <t t-if="order.payment_tx_id.state == 'done'">
                                    <span class="text-green">Paid Done</span>
                                </t>
                                <t t-if="order.payment_tx_id.state == 'cancel'">
                                    <span class="text-red">Cancel</span>
                                </t>
                                <t t-if="order.payment_tx_id.state == 'error'">
                                    <span class="text-red">Error</span>
                                </t>
                                <t t-if="order.payment_tx_id.state == 'authorized'">
                                     <span class="text-green">Autorized</span>
                                </t>
                            </p>
                        </div>
                        <div class="row payment-information ">
                            <p class="total-order">Total: <span t-field="order.amount_total"
                                                  t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></p>
                        </div>
                    </div>
                </div>
                <!-- order products -->
                <div class="order-products col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1 col-sm-10 col-sm-offset-1 col-xs-12 ">         
                    <t t-call="typ.my_final_products_table"/>                                   
                </div>
                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 order-payment">
                    <div class="row">
                        <div class="col-md-3 col-md-offset-2 col-lg-3 col-lg-offset-2 hidden-xs hidden-sm mt24">
                            <a class="btn btn-secondary btn-block" href="/shop/print" target="_blank">Print Order</a>
                        </div>
                        <div class="col-md-3 col-lg-3 hidden-xs hidden-sm mt24 no-padding-left">
                            <a class="btn btn-primary btn-small" href="/shop/">Continue shopping</a>
                        </div>
                        <div class="col-md-3 col-md-offset-0 col-lg-3 col-lg-offset-0 col-sm-8 col-sm-offset-2 col-xs-8 col-xs-offset-2 total-information mt16">
                            <p>Subtotal 
                                <t t-set="total_products" t-value="order.amount_untaxed-order.amount_delivery"/>
                                <span class="pull-right" t-esc="total_products" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': order.pricelist_id.currency_id,'display_currency': website.currency_id}" />
                            </p>
                            <p>Taxes
                                <span class="pull-right" t-field="order.amount_tax" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': order.pricelist_id.currency_id, 'display_currency': website.currency_id}" />
                            </p>
                            <p>Delivery                                
                                <span class="pull-right" t-esc="order.amount_delivery" t-options="{'widget': 'monetary', 'display_currency': order.pricelist_id.currency_id}" />
                            </p>
                            <p class="total-order">Total
                                <span class="pull-right" t-field="order.amount_total"  t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                            </p>
                        </div>
                        <div class="col-xs-12 hidden-md hidden-lg mt24">
                            <a class="btn btn-secondary btn-block" href="/shop/print" target="_blank">Print Order</a>
                        </div>
                        <div class="col-xs-12 hidden-md hidden-lg mt16 mb48">
                            <a class="btn btn-primary btn-block" href="/shop/">Continue shopping</a>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
       <xpath expr="//div[@id='wrap']/div/div[2]"  position='replace'/>
    </template>

</odoo>
