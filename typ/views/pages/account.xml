<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_layout" inherit_id="portal.portal_layout">

            <xpath expr="//div[hasclass('container')]"  position='attributes'>
                <attribute name="class" add="dark-white"  separator=" "/>
                <attribute name="class" remove="container mt16"  separator=" "/>
            </xpath> 

            <xpath expr="//div[@id='wrap']"  position='attributes'>
                <attribute name="class" add="dark-white mt0"  separator=" "/>
            </xpath>

            <xpath expr="//div[@id='wrap']/div"  position='attributes'>
                <attribute name="class" remove="mb64" separator=" "/>
            </xpath>

            <xpath expr="//div[@id='wrap']/div/t/div"  position='replace'>
                <t t-call="typ.my-account-menu"/>           
                <div class="col-md-8 col-md-offset-1 col-sm-8 col-sm-offset-0 col-xs-12 col-xs-offset-0">
                    <t t-call="typ.personal-info"/>                
                </div>
            </xpath>   

            <xpath expr="//div[hasclass('oe_structure')]/div"  position='replace'>
                <div class="oe_structure container my-account">
                    <div t-if="not no_breadcrumbs" class="row breadcrumbs-account mt32">
                        <div class="col-sm-12">
                            <ol class="breadcrumb o_portal_submenu">
                                <li t-if="page_name == 'my_details'"><a href="/my/home"> <i class="fa fa-chevron-left" aria-hidden="true"/> Back to personal information</a></li>            
                            </ol>
                        </div>
                    </div>
                </div>
            </xpath>

    </template>
        
    <template id="account_address" name="Account Address">
            <t t-call="typ.portal_layout">
                <t t-call="typ.my-account-menu"/>
                <div class="col-md-8 col-md-offset-1 col-sm-8 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_address">
                    <div class="col-md-12 col-xs-12 col-sm-12 text-center account-content mb24">
                            <h5 class="sections">SHIPPING INFORMATION</h5>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="row all_shipping">
                            <div class="mt8">
                                <t t-foreach="shippings" t-as="ship">
                                    <div class="col-xs-12 one_kanban ">
                                        <t t-call="typ.address_panel">
                                            <t t-set='contact' t-value="ship"/>
                                            <t t-set='selected' t-value="order.partner_shipping_id==ship"/>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>  
                    <div class="col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 text-center mt8 mb64 hidden-xs one_kanban">
                        <form action="/my/contact/edit" method="post" class=''>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <button class='a-submit btn btn-primary btn-block col-xs-12 mb16'>
                                Add an address
                            </button>
                        </form>

                    </div>              
                </div>   
                    
                <div class="col-md-12 oe_structure"/>
            </t>    
    </template>

    <template id="address_panel" name="Kanban address">            
            <div class="col-md-12 col-sm-12 col-xs-12 white-color account-information">
                <form action="" method="POST" class='hide'>
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <input type="hidden" name="partner_id" t-att-value="contact.id" />
                            <input type='submit'/>
                </form>
                <div class="row mt16 mb8 predetermined-btns">
                    <div class="col-md-6 col-xs-6 col-sm-6">
                        <a class="ship-address pull-left" title="Selected Address"> 
                            <i t-attf-class="address fa #{'fa-star address-selected' if selected else 'fa-star-o change_address_js'} fa-lg" t-att-data-value="'%d' % contact.id"><span t-attf-class="#{'' if selected else 'hidden'}">Predetermined</span></i>
                        </a>   
                    </div>   
                    <div t-attf-class=" col-md-6 col-xs-6 col-sm-6 #{'hidden no-delete-address' if selected else 'delete-address'}" t-att-id="'delete-btn%d' % contact.id">
                        <a class="pull-right delete_address_js" title="Delete" href="/delete-address" t-att-data-address-id="contact.id"> 
                            <img src="/web/image/theme_typ.delete-icon" alt="Delete item"/>
                        </a>   
                    </div>  
                </div>
                <div class="row">
                    <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                        <p>Name:</p>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                        <span t-esc="contact.name"></span>
                    </div>       
                </div>
                <div class="row mb16">
                    <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                        <p>Address:</p>  
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                        <t t-esc="contact" t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                    </div>           
                </div>
                <div class="row mb32">
                    <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                        <p>Phone:</p>  
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                        <p t-esc="contact.phone"></p>
                    </div>           
                </div>
                <div class="row text-center mt32 mb32 hidden-xs">
                    <a class="js_edit_address hidden-xs">Edit information</a>          
                </div>
            </div>
    </template>        

    <template id="contact_edit" name="Edit Contact">
            <t t-call="typ.portal_layout">                                         
                <div class="col-md-12 oe_cart">   

                    <!-- <t t-if="mode == ('new', 'billing')">
                        <h2 class="sections text-center mb32 mt0">Your Address
                            <small> or </small>
                            <a href='/web/login?redirect=/shop/checkout' class='btn btn-primary' style="margin-top: -11px">Log In</a>
                        </h2>
                    </t>

                    <t t-if="mode == ('edit', 'billing')">
                        <h2 class="sections text-center mb32 mt0">Your Address</h2>
                    </t> -->

                    <t t-if="mode[1] == 'shipping'">
                        <div class="row breadcrumbs-account">
                            <ol class="breadcrumb o_portal_submenu mb0">
                                <li><a href="/my/address"> <i class="fa fa-chevron-left" aria-hidden="true"/> Back to shipping information</a></li>
                            </ol>
                        </div>
                        <div class="row">
                            <h2 class="sections text-center mt8">Shipping Address </h2>
                        </div>
                    </t>

                    <t t-if="error" t-foreach="error.get('error_message', [])" t-as="err">
                        <h4 class="text-danger text-center mt32" t-esc="err" />
                    </t>
                    <div class="account-form mt32">
                        <form name="/shop/checkout" method="post" class="checkout_autoformat">

                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <input type="hidden" name="submitted" value="1" />

                            <input type="hidden" name="partner_id" t-att-value="partner_id or '0'" />

                            <div class="col-md-6 col-md-offset-3">
                                <div t-attf-class="form-group #{error.get('name') and 'has-error' or ''} row div_name">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="name">Name:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" name="name" class="form-control " t-att-value="'name' in checkout and checkout['name']" />
                                    </div>

                                </div>

                                <div class="clearfix" />
                                <t t-if="mode[1] == 'billing'">
                                    <div t-attf-class="form-group #{error.get('email') and 'has-error' or ''} row" id="div_email">
                                        <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="email">Email:</label>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <input type="email" name="email" class="form-control" t-att-value="'email' in checkout and checkout['email']" />
                                        </div>
                                    </div>
                                </t>

                                <div t-attf-class="form-group #{error.get('phone') and 'has-error' or ''} row" id="div_phone">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="phone">Phone:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="tel" name="phone" class="form-control" t-att-value="'phone' in checkout and checkout['phone']" />
                                    </div>
                                </div>

                                <div class="clearfix" />
                                <t t-if="mode == ('new', 'billing')">
                                    <div t-attf-class="form-group #{error.get('company_name') and 'has-error' or ''} row">
                                        <label class="control-label font-weight-normal label-optional text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="company_name">Company:</label>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <input type="text" name="company_name" class="form-control" t-att-value="'company_name' in checkout and checkout['company_name']" />
                                        </div>
                                    </div>
                                    <div t-attf-class="form-group #{error.get('vat') and 'has-error' or ''} row div_vat">
                                        <label class="control-label font-weight-normal label-optional text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="vat">VAT:</label>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <input type="text" name="vat" class="form-control" t-att-value="'vat' in checkout and checkout['vat']" />
                                        </div>
                                    </div>
                                </t>

                                <div class="clearfix" />
                                <div t-attf-class="form-group #{error.get('street') and 'has-error' or ''} row div_street">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="street">Street:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" name="street" class="form-control" t-att-value="'street' in checkout and checkout['street']" />
                                    </div>
                                </div>

                                <div t-attf-class="form-group #{error.get('street2') and 'has-error' or ''} row div_street2">
                                    <label class="control-label label-optional text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="street2">Neighborhood:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" name="street2" class="form-control" t-att-value="'street2' in checkout and checkout['street2']" />
                                    </div>
                                </div>

                                <div class="clearfix" />
                                <t t-set='zip_city' t-value='country and [x for x in country.get_address_fields() if x in ["zip", "city"]] or ["city", "zip"]'/>
                                <t t-if="'zip' in zip_city and zip_city.index('zip') &lt; zip_city.index('city')">
                                    <div t-attf-class="form-group #{error.get('zip') and 'has-error' or ''} row div_zip">
                                        <label class="control-label label-optional text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="zip">Zip Code:</label>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <input type="text" name="zip" class="form-control" t-att-value="'zip' in checkout and checkout['zip']" />
                                        </div>
                                    </div>
                                </t>

                                <t t-if="'zip' in zip_city and zip_city.index('zip') &gt; zip_city.index('city')">
                                    <div t-attf-class="form-group #{error.get('zip') and 'has-error' or ''} row div_zip">
                                        <label class="control-label label-optional text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="zip">Zip Code:</label>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <input type="text" name="zip" class="form-control" t-att-value="'zip' in checkout and checkout['zip']" />
                                        </div>
                                    </div>
                                </t>

                                <div class="clearfix" />
                                <div t-attf-class="form-group #{error.get('country_id') and 'has-error' or ''} row div_country">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="country_id">Country:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <select id="country_id" name="country_id" class="form-control">
                                            <option value="">Country...</option>
                                            <t t-foreach="countries" t-as="c">
                                                <option t-att-value="c.id" t-att-selected="c.id == (country and country.id or -1)">
                                                    <t t-esc="c.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>

                                <div t-attf-class="form-group #{error.get('state_id') and 'has-error' or ''} row div_state">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="state_id">State:</label>
                                    <div class="col-md-9">
                                        <select name="state_id" class="form-control" data-init="1">
                                            <option value="">State / Province...</option>
                                            <t t-foreach="country and country.state_ids or []" t-as="s">
                                                <option t-att-value="s.id" t-att-selected="s.id == ('state_id' in checkout and country and checkout['state_id'] != '' and int(checkout['state_id']))">
                                                    <t t-esc="s.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>

                                <div t-attf-class="form-group #{error.get('city') and 'has-error' or ''} row div_city">
                                    <label class="control-label text-right text-right-not-xs col-md-3 col-sm-3 col-xs-12" for="city">City:</label>
                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                        <input type="text" name="city" class="form-control" t-att-value="'city' in checkout and checkout['city']" />
                                    </div>
                                </div>
                                <input type="hidden" name="redirect" t-att-value="redirect"/>
                            </div>

                            <div class="clearfix"/>
                            <div class="col-md-8 col-sm-8 col-xs-12 col-md-offset-2 col-sm-offset-2 col-xs-offset-0 mt32 mb96">
                                    <div class="col-md-6 col-sm-6">
                                    <button class="btn btn-primary btn-block mb32">
                                        Save
                                    </button>
                                    </div>
                                    <div class="col-md-6 col-sm-6">
                                    <a href="/my/address" class="btn btn-secondary btn-block mb32">
                                        Cancel
                                    </a>
                                    </div>
                            </div>
                        </form>
                    </div>
                </div>
            </t>
    </template>
    <template id="my-account-menu">
        <div t-attf-class="col-xs-12 white-color account-menu text-center hidden-md hidden-lg hidden-sm my-account-mobile #{'mt32' if request.httprequest.path == '/my/payment_method' else ''}">
            <ul class="nav nav-pills nav-mobile list-unstyled ">
                <li  t-attf-class=" #{'active' if request.httprequest.path == '/my/home' or request.httprequest.path =='/my' else ''}"><a href="/my/home">Account</a></li>
                <li t-attf-class="#{'active' if request.httprequest.path == '/my/payment_method' else ''}" ><a  href="/my/payment_method">Payment methods</a></li>
                <li t-attf-class=" #{'active' if active_page =='/my/address' else ''}" ><a  href="/my/address">Addresses</a></li>
            </ul>
        </div>
        <div class="col-md-3 col-sm-4 hidden-xs">
            <div class="col-md-12 white-color account-menu mt64 mb48 no-padding-left">
                <ul class="nav-pills nav-desktop nav-stacked list-unstyled mt32 mb32">
                    <li  t-attf-class="mb16 #{'active' if request.httprequest.path == '/my/home' or request.httprequest.path =='/my' else ''}"><a class="no-padding-top" href="/my/home">Account</a></li>
                    <li t-attf-class="mb16 #{'active' if request.httprequest.path =='/my/payment_method' else ''}" ><a  href="/my/payment_method">Payment methods</a></li>
                    <li t-attf-class="mb16 #{'active' if request.httprequest.path =='/my/orders' or request.httprequest.path =='/my/quotes' else ''}"><a href="/my/orders">Orders</a></li>
                    <li t-attf-class="mb16 #{'active' if request.httprequest.path =='/my/invoices' or request.httprequest.path =='/my/credit_notes' else ''}"><a href="/my/invoices">Invoices</a></li>
                    <li t-attf-class="mb16 payment-complements-li #{'active' if request.httprequest.path =='/my/payment_complements' else ''}"><a href="/my/payment_complements">Payment Complements</a></li>
                    <li t-attf-class="mb16 #{'active' if active_page =='/my/address' else ''}" ><a  href="/my/address">Addresses</a></li>
                </ul>
            </div>
        </div>
    </template>

    <template id="order_date" name="Order Date">
            <span t-esc="time.strftime('%d', order_date)" /><span>/</span>
            <t t-call="typ.month_name">
                <t t-set="month" t-value="time.strftime('%m', order_date)" />
            </t>
            <span>/</span>
            <span t-esc="time.strftime('%Y', order_date)" />
    </template>
    <template id="month_name" name="Month Name">
        <span t-if="month == '01'">Jan</span>
        <span t-elif="month == '02'">Feb</span>
        <span t-elif="month == '03'">Mar</span>
        <span t-elif="month == '04'">Apr</span>
        <span t-elif="month == '05'">May</span>
        <span t-elif="month == '06'">Jun</span>
        <span t-elif="month == '07'">Jul</span>
        <span t-elif="month == '08'">Agu</span>
        <span t-elif="month == '09'">Sep</span>
        <span t-elif="month == '10'">Oct</span>
        <span t-elif="month == '11'">Nov</span>
        <span t-elif="month == '12'">Dic</span>
    </template>

    <template id="order_by_dates">
        <t t-foreach="archive_groups" t-as="group">
            <t t-if="group['date_begin'] == date">
                <li class="active">
                    <a t-att-href="default_url" t-ignore="True"><t t-esc="group['name']"/></a>
                </li>
            </t>
            <t t-if="group['date_begin'] != date">
                <li>
                    <a t-ignore="True" t-attf-href="#{default_url}?date_begin=#{group['date_begin']}&amp;date_end=#{group['date_end']}&amp;month=#{group['name']}"><t t-esc="group['name']"/></a>
                </li>
            </t>
        </t>
    </template>

    <template id="sort_by_orders">
        <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mb32 sort-products">
            <div t-attf-class="mt16 col-md-5 col-sm-5 col-xs-12">

                <t t-set="paid_invoices">Paid</t>
                <t t-set="unpaid_invoices">Unpaid</t>
                <t t-set="filter_invoices" t-value="[
                        (paid_invoices, 'paid'),
                        (unpaid_invoices, 'open'),
                    ]"/>
               <div t-if="request.httprequest.path == '/my/invoices' or request.httprequest.path == '/my/credit_notes'" class="row" >
                    <!-- invoices filter -->
                    <span class="mr16 filter">Filter by: </span>
                    <div class="dropdown btn-group  dropdown_filters">
                         <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span class="mr0" t-if="not invoices_status and not month_filter">All</span>
                            <span class="mr0" t-elif="month_filter" t-esc="month_filter"/>
                            <span class="mr0" t-elif="invoices_status == 'open'">Status: <span t-esc="unpaid_invoices"/></span>
                            <span class="mr0" t-else="">Status: <span t-esc="paid_invoices"/></span>
                            <i class="fa fa-chevron-down pull-right"/>
                        </a>

                        <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
                            <li>
                                <a t-if="in_view == 'invoices'" href="/my/invoices">All</a>
                                <a t-else="" href="/my/credit_notes">All</a>
                            </li>
                            <li class="dropdown-submenu">
                                <a tabindex="-1">Months</a>
                                <ul class="dropdown-menu">
                                    <t t-call="typ.order_by_dates"/>
                                </ul>
                            </li>
                            <li class="dropdown-submenu">
                                <a tabindex="-1">Status</a>
                                <ul class="dropdown-menu">
                                   <li t-foreach="filter_invoices" t-as="status">
                                        <a t-if="in_view == 'invoices'" t-attf-href="/my/invoices?invoices_status={{status[1]}}">
                                            <span t-raw="status[0]"/>
                                        </a>
                                        <a t-else="" t-attf-href="/my/credit_notes?invoices_status={{status[1]}}">
                                            <span t-raw="status[0]"/>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <div t-else="" class="row" >
                    <!-- filter for orders and quotes -->
                    <span class="mr16 filter">Filter by: </span>
                    <div class="dropdown btn-group  dropdown_filters">
                        <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span class="mr0" t-if="not month_filter">All</span>
                            <span class="mr0" t-else="" t-esc="month_filter"/>
                            <i class="fa fa-chevron-down pull-right"/>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a t-if="request.httprequest.path =='/my/quotes'" href="/my/quotes"><span>All</span></a>
                                <a t-if="request.httprequest.path =='/my/orders'" href="/my/orders"><span>All</span></a>
                            </li>
                            <t t-call="typ.order_by_dates"/>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="mt16 col-md-5 col-md-offset-2 col-sm-5 col-sm-offset-2 text-right">
                <div class="row">
                    <span class="mr16 filter">See:</span>
                    <div class="dropdown btn-group  dropdown_filters">
                        <a href="#" class="dropdown-toggle btn btn-default" data-toggle="dropdown">
                            <span t-if="request.httprequest.path == '/my/orders'">Orders</span>
                            <span t-if="request.httprequest.path == '/my/quotes'">Quotations</span>
                            <span t-if="request.httprequest.path == '/my/invoices'">Invoices</span>
                            <span t-if="request.httprequest.path == '/my/credit_notes'">Credit notes</span>
                            <i class="fa fa-chevron-down pull-right"/>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <t t-if="request.httprequest.path == '/my/invoices' or request.httprequest.path == '/my/credit_notes'">
                                <li>
                                    <a t-attf-href="/my/invoices?{{ keep_query() }}">
                                        <span>Invoices</span>
                                    </a>
                                </li>
                                <li>
                                    <a t-attf-href="/my/credit_notes?{{ keep_query() }}">
                                        <span>Credit notes</span>
                                    </a>
                                </li>
                            </t>
                            <t t-else="">
                                <li>
                                    <a t-attf-href="/my/quotes?{{ keep_query() }}">
                                        <span>Quotations</span>
                                    </a>
                                </li>
                                <li>
                                    <a t-attf-href="/my/orders?{{ keep_query() }}">
                                        <span>Orders</span>
                                    </a>
                                </li>
                            </t>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="my_orders" inherit_id="sale.portal_my_orders">
        <xpath expr="//div" position="replace"/>
        <xpath expr="//t/t/p" position="replace">
            <div class="col-md-9 col-md-offset-0 col-sm-9 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center mt0">
                    <h5 class="sections">ORDERS HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt24">
                    <h5 class="sections">Orders</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="col-sm-12 mt32">
                    <h5 class="sections">There are currently no orders for your account.</h5>
                </div>
            </div>
        </xpath>
       <xpath expr="//h3" position="replace">
            <t t-call="typ.my-account-menu"/>
            <div t-if="orders" class="col-md-9 col-md-offset-0 col-sm-9 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center account-content">
                    <h5 class="sections">ORDERS HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt24">
                    <h5 class="sections">Orders</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="my-table-typ col-sm-12 text-center white-color no-padding-right">
                    <div class="row text-center orders-title">
                        <div class="col-sm-2 mt24 mb8">
                            <p>#Order</p>
                        </div>
                        <div class="col-sm-3 mt24 mb8">
                            <p>Date</p>
                        </div>
                        <div class="col-sm-3 mt24 mb8">
                            <p>Total</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Status</p>
                        </div>
                    </div>
                    <div class="content-table-typ">
                        <t t-foreach="orders" t-as="order">
                            <div class="row">
                                <div class="col-sm-2">
                                    <p class="mt8"><span>#</span><span t-esc="order.name"/> </p>
                                </div>
                                <div class="col-sm-3 mt8">
                                    <t t-if="order.date_order">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(order.date_order,'%Y-%m-%d %H:%M:%S')" />
                                        </t>
                                    </t>
                                </div>
                                <div class="col-sm-3 mt8">
                                    <span class="total-order" t-field="order.amount_total" t-options='{"widget": "monetary", "display_currency": "order.pricelist_id.currency_id"}'/>
                                </div>
                                <div class="col-sm-2">
                                    <t t-if="order.state == 'done'">
                                        <p class="text-green mt8">Done</p>
                                    </t>
                                    <t t-if="order.state == 'cancel'">
                                        <p class="text-red status-order mt8">Cancelled</p>
                                    </t>
                                    <t t-if="order.state == 'sale'">
                                        <p class="orders-status mt8">Confirmed</p>
                                    </t>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <a t-attf-href="/my/orders/{{order.id}}?{{keep_query()}}">Details</a>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
                <div class="col-sm-12 col-xs-12 mt16 mb64">
                    <div class="col-sm-3 col-sm-offset-6 text-center">
                        <h6>Total (USD)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_amount_usd"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.USD")}'/>
                        </p>
                    </div>
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total (MXN)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_amount_mxn" 
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.MXN")}'/>
                        </p>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="my_invoices" inherit_id="account.portal_my_invoices">
        <xpath expr="//div" position="replace"/>
        <xpath expr="//t/t/p" position="replace">
            <div class="col-md-9 col-md-offset-0 col-sm-9 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center account-content">
                    <h5 class="sections">INVOICES HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt16 mb16">
                    <h5 t-if="in_view == 'credit_notes'" class="sections">Credit Notes</h5>
                    <h5 t-else="" class="sections">Invoices</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="col-sm-12 mt32">
                    <h5 class="sections" t-if="request.httprequest.path == '/my/invoices'">There are currently no invoices and payments for your account.</h5>
                    <h5 class="sections" t-else="">There are currently no credit notes and payments for your account.</h5>
                </div>
            </div>
        </xpath>
       <xpath expr="//h3" position="replace">
            <t t-call="typ.my-account-menu"/>
            <div t-if="invoices" class="col-md-9 col-md-offset-0 col-sm-8 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center account-content">
                    <h5 class="sections">INVOICES HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt16 mb16">
                    <h5 t-if="in_view == 'credit_notes'" class="sections">Credit Notes</h5>
                    <h5 t-else="" class="sections">Invoices</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="my-table-typ col-sm-12 text-center white-color no-padding-right mb16">
                    <div class="row text-center orders-title">
                        <div class="col-sm-2 mt24 mb8">
                            <p t-if="in_view == 'invoices'">#Invoice</p>
                            <p t-else="">#Credit Note</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Date</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Due Date</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Total</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Generate</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Status</p>
                        </div>
                    </div>
                    <div class="content-table-typ">
                       <t t-foreach="invoices" t-as="invoice">
                            <div class="row">
                                <div class="col-sm-2">
                                    <a t-attf-href="/my/invoices/#{invoice.id}"><p class="invoice-name mt8" t-esc="invoice.number"/></a> 
                                </div>
                                <div class="col-sm-2 mt8">
                                    <t t-if="invoice.date_invoice">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(invoice.date_invoice,'%Y-%m-%d')" />
                                        </t>
                                    </t>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <t t-if="invoice.date_invoice">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(invoice.date_due,'%Y-%m-%d')" />
                                        </t>
                                    </t>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <span class="total-order" t-esc="invoice.amount_total" t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <t t-set="attachment_id" t-value="invoice.my_invoices_zip()"/>
                                    <div class="col-sm-6">
                                        <a t-if="invoice.state == 'cancel'"><img src="/web/image/theme_typ.download-icon-disable" alt="Download invoice disabled"/></a>
                                        <a t-elif="attachment_id" t-att-href="'/web/content/{0}?download=true'.format(attachment_id[0].id)"><img src="/web/image/theme_typ.download-icon" alt="Download invoice"/></a>
                                    </div>
                                    <div class="col-sm-6">
                                        <a t-if="invoice.state == 'cancel'"><img src="/web/image/theme_typ.email-icon-disable" alt="Send invoice disabled"/></a>
                                        <a t-else="" t-att-href="'/send_invoice_mail/{0}'.format(invoice[0].id)"><img src="/web/image/theme_typ.email-icon" alt="Send invoice"/></a>
                                    </div>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <t t-if="invoice.state == 'open'">
                                        <a
                                        t-attf-href="/website_payment/pay?reference=#{invoice.number}&amp;amount=#{invoice.residual}&amp;currency_id=#{invoice.currency_id.id}&amp;country_id=#{invoice.partner_id.country_id.id}"
                                        alt="Pay now">Pay now</a>
                                    </t>
                                    <t t-if="invoice.state == 'paid'">
                                        <p class="mt8 text-green status-order">Paid</p>
                                    </t>
                                    <t t-if="invoice.state == 'cancel'">
                                        <p class="mt8 text-red status-order">Cancelled</p>
                                    </t>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
                <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12 mb64">
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total pagado (USD)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_to_paid_usd"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.USD")}'/>
                        </p>
                    </div>
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total por pagar (USD)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_unpaid_usd"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.USD")}'/>
                        </p>
                    </div>
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total pagado (MXN)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_to_paid_mxn"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.MXN")}'/>
                        </p>
                    </div>
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total por pagar (MXN)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_unpaid_mxn"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.MXN")}'/>
                        </p>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="payment_complements">

        <t t-call="portal.portal_layout">
            <t t-call="typ.my-account-menu"/>
            <div class="col-md-9 col-md-offset-0 col-sm-8 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center account-content mb32">
                    <h5 class="sections">PAYMENT COMPLEMENTS</h5>
                </div>
            </div>
            <div t-if="not payment_partner" class="col-sm-9 mt32">
                <h5 class="sections" >There are currently no payment complements for your account.</h5>
            </div>
            <div t-else="" class="col-sm-9 mb64">
                <div class="my-table-typ col-sm-12 text-center white-color no-padding-right mb16">
                    <div class="row text-center orders-title">
                        <div class="col-sm-4 mt24 mb8">
                            <p>Name</p>
                        </div>
                        <div class="col-sm-4 mt24 mb8">
                            <p>Payment Date</p>
                        </div>
                        <div class="col-sm-4 mt24 mb8">
                            <p>Download</p>
                        </div>
                    </div>
                    <!-- users are not allowed to see the account_payment model. We have to add a new ACL and update a sale record rule -->
                    <div class="content-table-typ">
                        <t t-foreach="payment_partner" t-as="id_payment">
                            <t t-set="attachment_id" t-value="id_payment.my_payment_complements_zip()" />
                            <t t-set="payment" t-value="env['account.payment'].sudo().search([('id','=', id_payment.id)])"/>
                            <t t-if="attachment_id">
                                <div class="row">
                                    <div class="col-sm-4 mt8">
                                        <span t-esc="payment.name"/>
                                    </div>
                                    <div class="col-sm-4 mt8">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(payment.payment_date,'%Y-%m-%d')" />
                                        </t>
                                    </div>
                                    <div class="col-sm-4 mt8">
                                        <a t-att-href="'/web/content/{0}?download=true'.format(attachment_id.id)"><img src="/web/image/theme_typ.download-icon" alt="Download Payment Complement"/></a>
                                    </div>
                                </div>
                            </t>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="my_quotations" inherit_id="sale.portal_my_quotations">
        <xpath expr="//div" position="replace"/>
        <xpath expr="//t/t/p" position="replace">
            <div class="col-md-9 col-md-offset-0 col-sm-9 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center mt0">
                    <h5 class="sections">ORDERS HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt24">
                    <h5 class="sections">Quotations</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="col-sm-12 mt32">
                    <h5 class="sections">There are currently no quotations for your account.</h5>
                </div>
            </div>
        </xpath>
        <xpath expr="//h3" position="replace">
            <t t-call="typ.my-account-menu"/>
            <div t-if="quotations" class="col-md-9 col-md-offset-0 col-sm-9 col-sm-offset-0 col-xs-12 col-xs-offset-0 o_my_sale_orders">
                <div class="col-md-12 text-center mt0">
                    <h5 class="sections">ORDERS HISTORY</h5>
                </div>
                <div class="col-md-12 text-center mt24">
                    <h5 class="sections">Quotations</h5>
                </div>
                <t t-call="typ.sort_by_orders"/>
                <div class="my-table-typ col-sm-12 text-center white-color no-padding-right">
                    <div class="row text-center orders-title">
                        <div class="col-sm-2 mt24 mb8">
                            <p>#Order</p>
                        </div>
                        <div class="col-sm-3 mt24 mb8">
                            <p>Date</p>
                        </div>
                        <div class="col-sm-3 mt24 mb8">
                            <p>Total</p>
                        </div>
                        <div class="col-sm-2 mt24 mb8">
                            <p>Status</p>
                        </div>
                    </div>
                    <div class="content-table-typ">
                        <t t-foreach="quotations" t-as="quotation">
                            <div class="row">
                                <div class="col-sm-2">
                                    <p class="mt8"> <span>#</span><span t-esc="quotation.name"/></p>
                                </div>
                                <div class="col-sm-3 mt8">
                                    <t t-if="quotation.date_order">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(quotation.date_order,'%Y-%m-%d %H:%M:%S')" />
                                        </t>
                                    </t>
                                </div>
                                <div class="col-sm-3 mt8">
                                    <span class="total-order" t-field="quotation.amount_total" t-options='{"widget": "monetary", "display_currency": quotation.pricelist_id.currency_id}'/>
                                </div>
                                <div class="col-sm-2">
                                    <t t-if="quotation.state == 'cancel'">
                                        <p class="text-red status-order mt8">Cancelled</p>
                                    </t>
                                    <t t-elif="quotation.is_expired">
                                        <p class="text-red status-order mt8">Expired</p>
                                    </t>
                                    <t t-else="">
                                        <p class="mt8 orders-status">Waiting</p>
                                    </t>
                                </div>
                                <div class="col-sm-2 mt8">
                                    <a t-attf-href="/my/orders/#{quotation.id}?#{keep_query()}">Details</a>
                                </div>

                            </div>
                        </t>
                    </div>
                </div>
                <div class="col-sm-12 col-xs-12 mt16 mb64">
                    <div class="col-sm-3 col-sm-offset-6 text-center">
                        <h6>Total (USD)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_amount_usd"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.USD")}'/>
                        </p>
                    </div>
                    <div class="col-sm-3 col-sm-offset-0 text-center">
                        <h6>Total (MXN)</h6>
                        <p class="unpaid-total mt16">
                            <span t-esc="total_amount_mxn"
                                t-options='{"widget": "monetary", "display_currency": env.ref("base.MXN")}'/>
                        </p>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <!-- orders breadcumb -->
    <template id="portal_my_home_menu_sale" inherit_id="sale.portal_my_home_menu_sale">
        <xpath expr="//ol[hasclass('o_portal_submenu')]/li[2]" position="replace"/>
        <xpath expr="//ol[hasclass('o_portal_submenu')]/li" position="replace"/>
        <xpath expr="//ol[hasclass('o_portal_submenu')]/li" position="replace">
            <li t-if="sales_order">
                <t t-if="sales_order.state in ('sent', 'cancel')"><a href="/my/quotes"><i class="fa fa-chevron-left" aria-hidden="true"/> Back to quotations history</a></t>
                <t t-else=""><a href="/my/orders"><i class="fa fa-chevron-left" aria-hidden="true"/> Back to order history</a></t>
            </li>
        </xpath>
        <xpath expr="//ol[hasclass('o_portal_submenu')]/li[2]" position="replace"/>
    </template>

    <!-- invoices breadcumb -->
    <template id="portal_my_home_menu_invoice" inherit_id="account.portal_my_home_menu_invoice">
         <xpath expr="//ol[hasclass('o_portal_submenu')]/li[5]" position="replace"/>
         <xpath expr="//ol[hasclass('o_portal_submenu')]/li[4]" position="replace">
            <li t-if="invoice">
               <a href="/my/invoices"><i class="fa fa-chevron-left" aria-hidden="true"/> Back to invoices history</a>
            </li>
        </xpath>
    </template>


    <template id="pay" inherit_id="payment.pay">
        <xpath expr="//div" position="attributes">
           <attribute name="class" add="dark-white"  separator=" "/>
        </xpath>
        <xpath expr="//div/div/h1" position="replace"/>
        <xpath expr="//div/div/div[2]" position="attributes">
           <attribute name="class" add="col-sm-8 col-sm-offset-1" remove="row" separator=" "/>
        </xpath>
        <xpath expr="//div/div/div[2]/div/p" position="before">
           <h5 class="sections mt16 mb24 text-center">PAYMENT</h5>
        </xpath>
        <xpath expr="//div/div/div[2]/div" position="attributes">
           <attribute name="class" add="col-sm-12" remove="col-md-7" separator=" "/>
        </xpath>
        <xpath expr="//div/div/div" position="before">
            <t t-call="typ.my-account-menu"/>
        </xpath>
        <xpath expr="//div/div/div[2]/div/t" position="replace">
            <div id="payment_method">
                <t t-call="payment.payment_tokens_list" t-if="reference and amount and currency">
                    <t t-set="mode" t-value="'payment'"/>
                    <t t-set="prepare_tx_url" t-value="'/website_payment/transaction/v2/' + str(amount) + '/' + str(currency.id) + '/' + reference"/>
                    <t t-set="form_action" t-value="'/website_payment/token/v2/' + str(amount) + '/' + str(currency.id) + '/' + reference"/>
                </t>
            </div>
        </xpath>
    </template>

    <!-- order/quotation details -->
    <template id="portal_order_page" inherit_id="sale.portal_order_page">
        <xpath expr="//div[hasclass('container')]" position="attributes">
            <attribute name="class" add="my-orders-details"  separator=" "/>
        </xpath>
        <xpath expr="//div[hasclass('panel-default')]" position="replace">
            <div class="col-sm-12">
                <div class="row">
                    <h5 class="sections mt16 mb24 text-center">
                        <t t-if="order.state in ('sent', 'cancel')">Quotation</t>
                        <t t-else="">Order</t>
                        <span>#</span><span t-esc="order.name"/>
                    </h5>
                </div>
                <div class="row text-center">
                        <t t-if="order.state in ('sent', 'cancel')">
                            <span class="date-order">Creation date:
                                <span class="date">
                                    <t t-if="order.create_date">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(order.create_date,'%Y-%m-%d %H:%M:%S')" />
                                        </t>
                                    </t>
                                </span>
                            </span>
                        </t>
                        <t t-else="">
                            <span class="date-order">Order Date:
                                <span class="date">
                                    <t t-if="order.create_date">
                                        <t t-call="typ.order_date">
                                            <t t-set="order_date" t-value="time.strptime(order.create_date,'%Y-%m-%d %H:%M:%S')" />
                                        </t>
                                    </t>
                                </span>
                            </span>
                        </t>
                </div>
            </div>
            <div class="col-sm-12">
                <!-- products -->
                <div class="col-sm-8 mb96">
                    <div class="order-products col-sm-12">
                    <t t-call="typ.my_final_products_table"/>
                    </div>
                    <div class="col-sm-12">
                        <div t-if=" not order.state in ('sent', 'cancel')" class="col-sm-6 mt24 no-padding-left no-padding-right">
                            <a t-att-href="'/shop/duplicate_order/' + slug(order)" class="btn btn-primary btn-size btn-block hidden">
                                <span class="">Repurchase Order</span>
                            </a>
                        </div>
                        <div t-attf-class="total-information mt16 #{'col-md-5 col-md-offset-1 col-sm-6 col-sm-offset-0' if not order.state in ('sent', 'cancel') else 'col-sm-7 col-sm-offset-5'}">                            
                            <p>Subtotal
                                <t t-set="total_products" t-value="order.amount_untaxed-order.amount_delivery"/>
                                <span class="pull-right">
                                    <span t-esc="total_products" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': order.pricelist_id.currency_id,'display_currency': website.currency_id}" />
                                    <span itemprop="priceCurrency" t-esc="order.currency_id.name" />
                                </span>
                            </p>
                            <p>Taxes
                                <span class="pull-right">
                                    <span t-field="order.amount_tax" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': order.pricelist_id.currency_id, 'display_currency': website.currency_id}" />
                                    <span itemprop="priceCurrency" t-esc="order.currency_id.name" />
                                </span>
                            </p>
                            <p>Delivery
                                <span class="pull-right">
                                    <span t-esc="order.amount_delivery" t-options="{'widget': 'monetary', 'display_currency': order.pricelist_id.currency_id}" />
                                    <span itemprop="priceCurrency" t-esc="order.currency_id.name" />
                                </span>
                            </p>
                            <p class="total-order">Total
                             <span class="pull-right">
                                <span t-field="order.amount_total"  t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                                <span itemprop="priceCurrency" t-esc="order.currency_id.name" />
                             </span>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- details -->
                <div class="col-sm-4 mt8">
                    <div class="row">
                        <t t-if=" not order.state in ('sent', 'cancel')">
                            <h6 class="sections">Payment method</h6>
                            <t t-if="order.payment_acquirer_id.name == 'Conekta'">
                                    <p class="mb0">Credit/Debit Card</p>
                            </t>
                            <p t-else="" class="mb0" t-field="order.payment_acquirer_id.name"/>
                        </t>
                    </div>
                    <div class="row mt8">
                        <h6 class="sections">Order status</h6>
                        <t t-if="order.state in ('sent', 'cancel')">
                            <t t-if="order.state == 'cancel'">
                                <p class="text-red status-order mt8">Cancelled</p>
                            </t>
                            <t t-elif="order.is_expired">
                                <p class="text-red status-order mt8">Expired</p>
                            </t>
                            <t t-else="">
                                <p class="mt8 orders-status">Waiting</p>
                            </t>
                        </t>
                        <t t-else="">
                           <t t-if="order.state == 'done'">
                                <p class="text-green mt8">Done</p>
                            </t>
                            <t t-if="order.state == 'cancel'">
                                <p class="text-red status-order mt8">Cancelled</p>
                            </t>
                            <t t-if="order.state == 'sale'">
                                <p class="orders-status mt8">Confirmed</p>
                            </t>
                        </t>
                    </div>
                    <div class="row">
                        <h6 class="sections">Billing Adddres</h6>
                        <p class="mb0" t-field="order.partner_invoice_id.name"/>
                        <p t-if="order.partner_invoice_id.vat" class="mb0">
                            <span>RFC: </span><span  t-field="order.partner_invoice_id.vat" />
                        </p>
                        <address t-field="order.partner_invoice_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}'/>
                    </div>
                    <div class="row">
                        <h6 class="sections">Shipping Address</h6>
                        <address t-field="order.partner_shipping_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}'/>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="portal_invoice_page" inherit_id="account.portal_invoice_page">
        <xpath expr="//div[hasclass('container')]" position="attributes">
            <attribute name="class" add="my-orders-details"  separator=" "/>
        </xpath>
        <xpath expr="//div[hasclass('panel-default')]" position="replace">
            <div class="col-sm-12">
                <div class="row">
                    <h5 class="sections mt16 mb24 text-center">
                        Invoice
                        <span t-field="invoice.number"/>
                    </h5>
                </div>
                <div class="row text-center">
                    <span class="date-order">Invoice Date:
                        <span class="date">
                            <t t-if="invoice.date_invoice">
                            <t t-call="typ.order_date">
                                    <t t-set="order_date" t-value="time.strptime(invoice.date_invoice,'%Y-%m-%d')" />
                                </t>
                            </t>
                        </span>
                    </span>
                </div>
            </div>
            <div class="col-sm-12">
                <!-- products -->
                <div class="col-sm-8 mb96">
                    <div class="order-products col-sm-12">
                        <div class="my-cart-typ confirmation-order mt32 mb8 hidden-xs">
                        <!-- products list -->
                            <div class="products-table text-center">
                                <t t-foreach="invoice.invoice_line_ids" t-as="l">
                                    <div class="row">
                                        <div class="col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 mt16 mb16">
                                            <p class="product-order text-left mb0" t-field="l.name" />
                                        </div>
                                        <div class="col-md-2  col-sm-2  mt16 mb16">
                                             <p t-field="l.price_unit"/>
                                        </div>
                                        <div class="col-md-2 col-sm-2 mt16 mb16">
                                            <p t-field="l.quantity"/>
                                            <p t-field="l.uom_id"  groups="uom.group_uom"/>
                                        </div>
                                        <div class="col-md-3 col-sm-3 mt16 mb16 subtotal-product">
                                            <span class="taxed-price" t-field="l.price_subtotal"
                                             t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <t t-set="attachment_id" t-value="invoice.my_invoices_zip()"/>
                        <div class="col-sm-6 mt24 no-padding-left no-padding-right">
                            <a t-if="attachment_id" t-att-href="'/web/content/{0}?download=true'.format(attachment_id.id)" class="btn btn-primary btn-size btn-block" title="Download">
                                Download
                            </a>
                        </div>
                        <div class="total-information mt16 col-sm-6 col-sm-offset-0 col-md-5 col-md-offset-1">
                            <p>Subtotal
                                <span class="pull-right">
                                    <span t-field="invoice.amount_untaxed" t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/>
                                    <span itemprop="priceCurrency" t-esc="invoice.currency_id.name" />
                                </span>
                            </p>
                            <p>Taxes
                                <span class="pull-right">
                                    <t t-foreach="invoice.tax_line_ids" t-as="t">
                                        <span t-field="t.amount" t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/>
                                        <span itemprop="priceCurrency" t-esc="invoice.currency_id.name" />
                                    </t>
                                </span>
                            </p>
                            <p class="total-order">Total
                                <span class="pull-right">
                                <span t-field="invoice.amount_total" t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/>
                                <span itemprop="priceCurrency" t-esc="invoice.currency_id.name" />
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- details -->
                <div class="col-sm-4 mt8">
                    <div class="row" t-if="invoice.origin">
                        <h6 class="sections">Source</h6>
                        <p class="mb0" t-field="invoice.origin"/>
                    </div>
                    <div class="row">
                        <h6 class="sections">Invoice Status</h6>
                        <t t-if="invoice.state == 'open'">
                            <a
                            t-attf-href="/website_payment/pay?reference=#{invoice.number}&amp;amount=#{invoice.residual}&amp;currency_id=#{invoice.currency_id.id}&amp;country_id=#{invoice.partner_id.country_id.id}"
                            alt="Pay now" class="btn btn-primary">Pay now</a>
                        </t>
                        <t t-if="invoice.state == 'paid'">
                            <p class="mt8 text-green status-order">Paid</p>
                        </t>
                        <t t-if="invoice.state == 'cancel'">
                            <p class="mt8 text-red status-order">Cancelled</p>
                        </t>
                    </div>
                    <div class="row mt8">
                        <h6 class="sections">Customer Information</h6>
                        <p t-field="invoice.partner_id.name" class="mb0"/>
                        <p t-if="invoice.partner_id.vat" class="mt8 mb0">
                            <span class="date-order mr8">RFC:</span><span  t-field="invoice.partner_id.vat" class="mb0"/>
                        </p>
                        <address class="mb0" t-field="invoice.partner_id"
                        t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="email_sent" name="Email Sent">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container mb64">
                    <div class="col-md-8">
                        <div class="oe_structure">
                            <h3 class="alert alert-success">The invoice has been sent</h3>
                        </div>
                    </div>
                    <div id="o_my_sidebar" class="col-md-3 col-md-offset-1 o_my_sidebar">
                        <div class="o_my_details">
                            <h3 class="page-header">Your Details <a href="/my/home" class="btn btn-default btn-xs">Change</a></h3>
                            <div t-field="user.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                        </div>
                    </div>
                    <div class="col-md-12 oe_structure"/>
                </div>
            </div>
        </t>
    </template>
    <template id="personal-info">
        <div class="col-md-12 col-sm-12 col-xs-12 text-center account-content mb24">
                <h5 class="sections">ACCOUNT INFORMATION</h5>
        </div>
        <div class="col-md-12 col-sm-12 col-xs-12 white-color account-information">
            <div class="row mt32">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>Email:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 mb16 field-content">
                    <span t-esc="user_id.login"/>
                </div>
            </div>
            <div class="row mb32">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>Password:</p>  
                </div>
                <div class="col-md-2 col-sm-3 col-xs-8">
                    <p>**********</p>
                </div>
                <div class="col-md-4 col-sm-4 text-right hidden-xs">
                    <a href="/my/account/reset_password">Reset</a>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-sm-12 col-xs-12 text-center mt8 mb24">
                <h5 class="sections">BILLING INFORMATION</h5>
        </div>
         <div class="col-md-12 col-sm-12 col-xs-12 white-color mb64 account-information">
            <div class="row mt32">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>Name:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                    <span t-esc="user_id.partner_id.name"></span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>RFC:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                    <p t-esc="user_id.partner_id.vat"></p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>Email:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                    <p t-esc="user_id.login"></p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field mt16">
                    <p>Address:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                    <p t-field="user_id.partner_id" t-options="dict(widget='contact', fields=['address'], no_marker=True)"/>
                </div>
            </div>
            <div class="row mb32">
                <div class="col-md-3 col-md-offset-2 col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 text-right account-field">
                    <p>Phone:</p>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-8 field-content">
                    <p t-esc="user_id.partner_id.phone"></p>
                </div>
            </div>
            <div class="row text-center mt32 mb32 hidden-xs">
                <a href="/my/account">Edit information</a>
            </div>
        </div>
    </template>

    <template id="portal_my_details" inherit_id="portal.portal_my_details">
        <xpath expr="//h3" position="replace">
            <h3 class="sections text-center mb32">EDIT PERSONAL INFORMATION</h3>
        </xpath>
        <xpath expr="//form" position="replace">
            <div class="account-form">
                <form action="/my/account" method="post">
                    <div class="col-md-6 col-md-offset-3 o_portal_details">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div  t-attf-class="form-group row #{error.get('name') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="name">Name:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <input type="text" name="name" class="form-control" t-att-value="name or partner.name" />
                            </div>
                        </div>

                        <div class="clearfix" />
                        <div t-attf-class="form-group row #{error.get('company_name') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="company_name">Company Name:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <p t-if="partner.commercial_partner_id.is_company" class="form-control" t-esc="partner.commercial_company_name"/>
                                <input t-else="" type="text" name="company_name" class="form-control" t-att-value="company_name or partner.company_name"/>
                            </div>
                        </div>

                        <div t-if="has_check_vat" class="form-group row  #{error.get('vat') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="vat">VAT:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <input type="text" name="vat" class="form-control" t-att-value="vat or partner.vat" />
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('email') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="email">Email:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <input type="email" name="email" class="form-control" t-att-value="email or partner.email" />
                            </div>
                        </div>

                        <div class="clearfix" />

                        <div t-attf-class="form-group row #{error.get('street') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="street">Street:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <input type="text" name="street" class="form-control" t-att-value="street or partner.street"/>
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('street2') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="street2">Neighborhood:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <input type="text" name="street2" class="form-control" t-att-value="street2 or partner.street2"/>
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('city') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="city">City:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <input type="text" name="city" class="form-control" t-att-value="city or partner.city" />
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('zip') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="zipcode">ZIP:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <input type="text" name="zipcode" class="form-control" t-att-value="zipcode or partner.zip" />
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('country_id') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="country_id">Country:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <select name="country_id" class="form-control">
                                    <option value="">Country...</option>
                                    <t t-foreach="countries or []" t-as="country">
                                        <option t-att-value="country.id" t-att-selected="country.id == int(country_id) if country_id else country.id == partner.country_id.id">
                                            <t t-esc="country.name" />
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>

                        <div t-attf-class="form-group row #{error.get('state_id') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="state_id">State:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                            <select name="state_id" class="form-control">
                                    <option value="">select...</option>
                                    <t t-foreach="states or []" t-as="state">
                                        <option t-att-value="state.id" style="display:none;" t-att-data-country_id="state.country_id.id" t-att-selected="state.id == partner.state_id.id">
                                            <t t-esc="state.name" />
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>

                        <div  t-attf-class="form-group row #{error.get('phone') and 'has-error' or ''}">
                            <label class="control-label text-right col-md-3 col-sm-3 col-xs-12" for="phone">Phone:</label>
                            <div class="col-md-9 col-sm-9 col-xs-12">
                                <input type="tel" name="phone" class="form-control" t-att-value="phone or partner.phone" />
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div t-if="error_message" class="alert alert-danger">
                                    <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br /></t>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="redirect" t-att-value="redirect"/>

                    </div>
                    <div class="col-md-8 col-sm-8 col-xs-12 col-md-offset-2 col-sm-offset-2 col-xs-offset-0 clearfix mt32 mb96">
                            <div class="col-md-6 col-sm-6">
                                <button type="submit" class="btn btn-primary btn-block mb32 ">
                                    Save
                                </button>
                            </div>
                            <div class="col-md-6 col-sm-6">
                                <a href="/my/home" class="btn btn-secondary btn-block">Cancel</a>
                            </div>
                    </div>

                </form>
            </div>
        </xpath>
    </template>

    <template id="pay_methods" inherit_id="payment.pay_methods">
            <xpath expr="//div[hasclass('wrap')]"  position='attributes'>
                <attribute name="class" add="dark-white"  separator=" "/>            
            </xpath>

            <xpath expr="//div[hasclass('clearfix')]/div/div"  position='attributes'>
                 <attribute name="class" remove="col-sm-8" add="col-md-8 col-md-offset-1 col-sm-8 col-sm-offset-0 col-xs-12 col-xs-offset-0"  separator=" "/>          
            </xpath> 

            <xpath expr="//div[hasclass('clearfix')]/div"  position='attributes'>
                 <attribute name="class" remove="row" add="container"  separator=" "/>          
            </xpath> 

            <xpath expr="//div[hasclass('clearfix')]/div/div"  position='before'>
                <t t-call="typ.my-account-menu"/>           
            </xpath>   

            <xpath expr="//div[hasclass('clearfix')]/div/div/h3"  position='replace'>
                <h5 class="sections text-center mt64 mb24 hidden-xs">MY PAYMENT METHODS</h5>  
                <h5 class="sections text-center mt32 mb24 hidden-md hidden-lg hidden-sm">MY PAYMENT METHODS</h5>        
            </xpath>

            <xpath expr="//div[hasclass('container')]/div/div"  position='replace'/>   
    </template>

    <template id="payment_tokens_list" inherit_id="payment.payment_tokens_list">

        <xpath expr="//form/div[hasclass('pull-right')]/button[2]"  position='replace'>
            <button t-if="mode == 'manage' and s2s_acquirers" id="o_payment_form_add_pm" class="btn btn-primary btn-lg mb32 mt8">
                    Add new card
            </button> 
        </xpath>

        <xpath expr="//form/div[hasclass('pull-right')]"  position='attributes'>
            <attribute name="class" remove="pull-right" add="text-center"  separator=" "/>
        </xpath>

    </template>   

</odoo>
