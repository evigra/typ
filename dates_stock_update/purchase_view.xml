<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
        <!--======================FORM VIEW =======================-->
        <record id="update_shipment_purchase_form_id" model="ir.ui.view">
            <field name="name">update.shipment.purchase</field>
            <field name="model">update.shipment.purchase</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Actualización de Fechas de Embarque" version="7.0">
                    <separator colspan="4" string="Selecciona la Nueva Fecha y Pulsa Actualizar"/>
                    <group colspan="4">
                      <field name="datetime_act" />
                    </group>
                    
                    <center>
                        <group col="4" colspan="2">
                            <button special="cancel" string="_Cancelar" type="object" icon="gtk-cancel"/>
                            <button name="write_date" string="_Actualizar" type="object" icon='gtk-execute'/>
                        </group>
                    </center>
                </form>

                </field>
            </record>

        <!--============================================ACTION========================================-->

        <act_window
            name="Actualizar Fecha/Embarque"
            res_model="update.shipment.purchase"
            src_model="purchase.order.line"
            view_mode="form" target="new"
            key2="client_action_multi"
            id="update_fields_shipment"/>
        <!--======================FORM VIEW =======================-->
        <record id="update_shipment_purchase_form_lines_id" model="ir.ui.view">
            <field name="name">update.shipment.purchase.line</field>
            <field name="model">update.shipment.purchase.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Actualización de Fechas de Recepcion" version="7.0">
                    <separator colspan="4" string="Selecciona la Nueva Fecha y Pulsa Actualizar"/>
                    <group colspan="4">
                      <field name="datetime_act" />
                    </group>
                    
                    <center>
                        <group col="4" colspan="2">
                            <button special="cancel" string="_Cancelar" type="object" icon="gtk-cancel"/>
                            <button name="write_date" string="_Actualizar" type="object" icon='gtk-execute'/>
                        </group>
                    </center>
                </form>

                </field>
            </record>

        <!--============================================ACTION========================================-->

        <act_window
            name="Actualizar Fecha/Recepcion"
            res_model="update.shipment.purchase.line"
            src_model="purchase.order.line"
            view_mode="form" target="new"
            key2="client_action_multi"
            id="update_fields_shipment_lines"/>

    <!-- HERENCIA AL METODO RECIBIR PRODUCTOS EN COMPRAS -->
    <record id="view_tree_inhrt_stock_move" model="ir.ui.view">
            <field name="name">stock.move.inht</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="stock.view_move_tree_reception_picking"/>
            <field name="arch" type="xml">
                <field name="origin" position="after">
                    <field name="date_expected" />
                </field>
            </field>
        </record>

        <record model="ir.ui.view" id="inhrit_form_date_shpmnt">
            <field name="name">purchase.order.form.date</field>
            <field name="model">purchase.order</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <field name="date_order" position="after" >
                    <field name="shipment_t_date" on_change="on_change_shipment(order_line,shipment_t_date)" attrs="{'readonly':[('state','not in',('draft','sent','confirmed','approved'))]}"/>

                </field>
                <xpath expr="//field[@name='order_line']/tree/field[@name='date_planned']" position="after">
                    <button name='%(update_fields_shipment_lines)d' type='action' string='Fecha Recepcion' icon="terp-go-today" />
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='date_planned']" position="before">
                    <field name="required_date_product" invisible="1"/>
                    <!-- <field name="shipment_t_date" on_change="on_change_shipment(product_id,shipment_t_date)" attrs="{'required':[('required_date_product','=',True)]}"/> -->
                    <field name="shipment_t_date" attrs="{'required':[('required_date_product','=',True)]}"/>
                    <button name='%(update_fields_shipment)d' type='action' string='Fecha Embarque' icon="terp-go-today" />
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="inhrit_tree_date_shpmnt">
            <field name="name">purchase.order.tree.date</field>
            <field name="model">purchase.order</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="purchase.purchase_order_tree"/>
            <field name="arch" type="xml">
                <field name="minimum_planned_date" position="after" >
                    <field name="proximite_date_shipment" />
                </field>

            </field>
        </record>


</data>
</openerp>
