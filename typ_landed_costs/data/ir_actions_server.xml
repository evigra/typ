<?xml version='1.0' encoding='UTF-8'?>
<openerp>
    <data noupdate="1">

        <record id="server_action_adjust_exchange_differential_landed" model="ir.actions.server">
            <field name="name">Exchange Differential Adjust</field>
            <field name="model_id" model="ir.model" search="[('model', '=', 'stock.landed.cost')]"/>
            <field name="state">code</field>
            <field name="code">
landed = env['stock.landed.cost']
if object.state == 'done' and object.is_pedimento == True:
    for pick in object.picking_ids:
        new = landed.adjust_cost_for_exchange_differential(pick, object.date)
        object.write({'exchange_landed_ids': [(6, 0, [new.id])]})
            </field>
        </record>
    </data>
</openerp>
